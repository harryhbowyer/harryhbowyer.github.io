(window.webpackJsonpproject1=window.webpackJsonpproject1||[]).push([[0],{233:function(e,t){},290:function(e,t,n){e.exports=n(587)},295:function(e,t,n){},296:function(e,t,n){},340:function(e,t,n){},454:function(e,t,n){},455:function(e,t,n){},457:function(e,t,n){},461:function(e,t){},462:function(e,t){},463:function(e,t,n){},481:function(e,t){},483:function(e,t){},493:function(e,t,n){},494:function(e,t,n){},585:function(e,t,n){},587:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(9),o=n.n(i),s=n(192),c=n(76),l=n(20),d=n(21),u=n(23),f=n(22),m=n(24),p=(n(295),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"recipe-list"},window.foodnet.recipes.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1})).map((function(t){return e.createRecipe(t)})))}},{key:"createRecipe",value:function(e){var t=this;return r.a.createElement("div",{key:e.id,className:"recipe-list-item"+(window.foodnet.selected===e.id?" selected":""),onClick:function(){window.foodnet.selected=e.id,t.props.select(e.id)}},e.name)}}]),t}(r.a.Component)),h=n(43),w=(n(296),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"recipe-toolbar"},r.a.createElement(h.a,{onClick:function(){return e.props.showModal("add")}},"Add"),r.a.createElement(h.a,{disabled:!this.props.selected,onClick:function(){return e.props.showModal("edit")}},"Edit"),r.a.createElement(h.a,{disabled:!this.props.selected,onClick:function(){return e.props.delete()}},"Delete"))}}]),t}(r.a.Component)),y=n(595),v=n(594),g=n(50),b=n(96),E=n(592),k=n(283),O=n(146),C=n(198),S=n(10),j=n(51),x=n(589),N=(n(340),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=function(){var t=window.foodnet.ingredients.map((function(e){return e.name}));return e.props.edit&&(t=window.foodnet.ingredients.filter((function(t){return t.id!==e.state.id})).map((function(e){return e.name}))),-1===t.indexOf(e.state.name)},n=function(){e.props.edit?(window.foodnet.ingredients.find((function(t){return t.id===e.state.id})).name=e.state.name,e.props.close()):(window.foodnet.ingredients.push({id:0===window.foodnet.ingredients.length?1:Math.max.apply(Math,Object(g.a)(window.foodnet.ingredients.map((function(e){return e.id}))))+1,name:e.state.name}),window.foodnet.sync(),e.props.close())};return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}}},this.props.edit&&this.renderPicker(),r.a.createElement(E.a.Item,{label:this.props.edit?"New Name":"Name",validateStatus:this.state.name&&t()?"success":"error",hasFeedback:!0,help:this.state.name&&t()?void 0:this.state.name?"Name should be unique":"Should not be blank"},r.a.createElement(k.a,{autoFocus:!0,value:this.state.name,placeholder:"Enter a name",onChange:function(t){return e.setState({name:t.target.value})},onPressEnter:function(){e.validate()||n()}}))),r.a.createElement("div",{className:"footer"},this.props.edit&&r.a.createElement(h.a,{key:"delete",type:"danger",disabled:!this.state.id,onClick:function(){var t;t=e.state.id,window.foodnet.recipes.find((function(e){return e.ingredients.find((function(e){return e.id===t}))}))?y.a.error("This ingredient is still being used. Please remove, replace, or rename the ingredient where it is being used before deleting."):(window.foodnet.ingredients=window.foodnet.ingredients.filter((function(t){return t.id!==e.state.id})),window.foodnet.sync(),e.props.close())}},"Delete"),r.a.createElement(h.a,{key:"back",onClick:function(){return e.props.close()}},"Cancel"),r.a.createElement(h.a,{type:"primary",disabled:this.validate(),onClick:function(){return n()}},"Submit")))}},{key:"renderPicker",value:function(){var e=this;return r.a.createElement(E.a.Item,{label:"Choose existing ingredient",validateStatus:this.props.edit&&!this.state.id?"error":"success",hasFeedback:!0},r.a.createElement(j.a,{value:this.state.id?this.state.id.toString():void 0,onChange:function(t){e.setState({id:Number(t),name:window.foodnet.ingredients.find((function(e){return e.id===Number(t)})).name})}},window.foodnet.ingredients.map((function(e){return r.a.createElement(j.a.Option,{key:e.id},e.name)}))))}},{key:"validate",value:function(){return!this.state.name||this.props.edit&&!this.state.id}}]),t}(r.a.Component)),I=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=function(){var t=window.foodnet.measurements.map((function(e){return e.name}));return e.props.edit&&(t=window.foodnet.measurements.filter((function(t){return t.id!==e.state.id})).map((function(e){return e.name}))),-1===t.indexOf(e.state.name)},n=function(){e.props.edit?window.foodnet.measurements.find((function(t){return t.id===e.state.id})).name=e.state.name:window.foodnet.measurements.push({id:0===window.foodnet.measurements.length?1:Math.max.apply(Math,Object(g.a)(window.foodnet.measurements.map((function(e){return e.id}))))+1,name:e.state.name});e.props.close(),window.foodnet.sync()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}}},this.props.edit&&this.renderPicker(),r.a.createElement(E.a.Item,{label:this.props.edit?"New Name":"Name",validateStatus:this.state.name&&t()?"success":"error",hasFeedback:!0,help:this.state.name&&t()?void 0:this.state.name?"Name should be unique":"Should not be blank"},r.a.createElement(k.a,{autoFocus:!0,value:this.state.name,placeholder:"Enter a name",onChange:function(t){return e.setState({name:t.target.value})},onPressEnter:function(){e.validate()||n()}}))),r.a.createElement("div",{className:"footer"},this.props.edit&&r.a.createElement(h.a,{key:"delete",type:"danger",disabled:!this.state.id,onClick:function(){var t;t=e.state.id,window.foodnet.recipes.find((function(e){return e.ingredients.find((function(e){return e.type===t}))}))?y.a.error("This measurement is still being used. Please remove, replace, or rename the measurement where it is being used before deleting."):(window.foodnet.measurements=window.foodnet.measurements.filter((function(t){return t.id!==e.state.id})),window.foodnet.sync(),e.props.close())}},"Delete"),r.a.createElement(h.a,{key:"back",onClick:function(){return e.props.close()}},"Cancel"),r.a.createElement(h.a,{type:"primary",disabled:this.validate(),onClick:function(){return n()}},"Submit")))}},{key:"renderPicker",value:function(){var e=this;return r.a.createElement(E.a.Item,{label:"Choose existing measurement",validateStatus:this.props.edit&&!this.state.id?"error":"success",hasFeedback:!0},r.a.createElement(j.a,{value:this.state.id?this.state.id.toString():void 0,onChange:function(t){e.setState({id:Number(t),name:window.foodnet.measurements.find((function(e){return e.id===Number(t)})).name})}},window.foodnet.measurements.map((function(e){return r.a.createElement(j.a.Option,{key:e.id},e.name)}))))}},{key:"validate",value:function(){return!this.state.name||this.props.edit&&!this.state.id}}]),t}(r.a.Component);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={ingredients:[]},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(this.props.edit&&!this.state.name){var t=window.foodnet.recipes.find((function(t){return t.id===e.props.edit}));this.setState(T({},t))}}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,Object.assign({},{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}}},{className:"recipe-form"}),r.a.createElement(E.a.Item,{label:"Name",validateStatus:this.state.name?"success":"error",hasFeedback:!0,help:this.state.name?void 0:"Should not be blank"},r.a.createElement(k.a,{placeholder:"Enter a name",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),this.renderConfigMenu(),this.renderMultichooser(),this.renderTable(),r.a.createElement(E.a.Item,{className:"instructions",label:"Instructions"},r.a.createElement(k.a.TextArea,{value:this.state.desc,autosize:{minRows:2,maxRows:6},onChange:function(t){return e.setState({desc:t.target.value})}}))),r.a.createElement("div",{className:"footer"},r.a.createElement(h.a,{key:"back",onClick:function(){return e.props.close()}},"Cancel"),r.a.createElement(h.a,{type:"primary",disabled:this.validateForm(),onClick:function(){if(e.state.id)window.foodnet.recipes=window.foodnet.recipes.filter((function(t){return t.id!==e.state.id})).concat(T({},e.state));else{var t=0===window.foodnet.recipes.length?1:Math.max.apply(Math,Object(g.a)(window.foodnet.recipes.map((function(e){return e.id}))))+1;window.foodnet.recipes.push(T({},e.state,{id:t}))}window.foodnet.sync(),e.props.close()}},"Submit")),this.renderModal(),this.renderTModal())}},{key:"renderConfigMenu",value:function(){var e=this;return r.a.createElement("div",{className:"config"},"Configure Ingredients/Measurements",r.a.createElement(O.a,{overlay:r.a.createElement(C.a,{onClick:function(t){switch(t.key){case"1":e.setState({modal:"add"});break;case"2":e.setState({modal:"edit"});break;case"3":e.setState({tmodal:"add"});break;case"4":e.setState({tmodal:"edit"})}}},r.a.createElement(C.a.Item,{key:"1"},r.a.createElement(S.a,{type:"plus"}),"Create New Ingredient"),r.a.createElement(C.a.Item,{key:"2"},r.a.createElement(S.a,{type:"edit"})," Edit Existing Ingredients"),r.a.createElement(C.a.Divider,null),r.a.createElement(C.a.Item,{key:"3"},r.a.createElement(S.a,{type:"plus"})," Create New Measurement"),r.a.createElement(C.a.Item,{key:"4"},r.a.createElement(S.a,{type:"edit"})," Edit Existing Measurements"))},r.a.createElement(S.a,{type:"setting",className:"setting-icon"})))}},{key:"renderModal",value:function(){var e=this;return this.state.modal&&r.a.createElement(v.a,{width:"90%",visible:!0,footer:null,onCancel:function(){return e.setState({modal:void 0})}},r.a.createElement(N,{edit:"edit"===this.state.modal||void 0,close:function(){return e.setState({modal:void 0})}}))}},{key:"renderTModal",value:function(){var e=this;return this.state.tmodal&&r.a.createElement(v.a,{width:"90%",visible:!0,footer:null,onCancel:function(){return e.setState({tmodal:void 0})}},r.a.createElement(I,{edit:"edit"===this.state.tmodal||void 0,close:function(){return e.setState({tmodal:void 0})}}))}},{key:"renderTable",value:function(){var e=this,t=function(e,t,n){return r.a.createElement(E.a.Item,{validateStatus:t?"success":"error",help:t?"":n},e)},n=[{title:"Name",dataIndex:"id",key:"name",render:function(e){var t=window.foodnet.ingredients.find((function(t){return t.id===e}));return r.a.createElement("div",null,t.name)}},{title:"Amount",dataIndex:"id",key:"qty",render:function(n){var a=e.state.ingredients.find((function(e){return e.id===n}));return t(r.a.createElement(k.a,{type:"number",value:a.qty,onChange:function(t){e.setState({ingredients:e.state.ingredients.filter((function(e){return e.id!==n})).concat([T({},e.state.ingredients.find((function(e){return e.id===n})),{qty:t.target.value})])})}}),a.qty,"Should not be blank")}},{title:"Type",dataIndex:"id",key:"type",render:function(n){var a=e.state.ingredients.find((function(e){return e.id===n}));return t(r.a.createElement(j.a,{placeholder:"Type",filterOption:function(e,t){var n=t.props.children,a="string"===typeof e||e instanceof String?e:e.toString();return(n||"").toLowerCase().indexOf((a||"").toLowerCase())},value:a.type?a.type.toString():void 0,onChange:function(t){e.setState({ingredients:e.state.ingredients.filter((function(e){return e.id!==a.id})).concat(e.state.ingredients.filter((function(e){return e.id===a.id})).map((function(e){return T({},e,{type:Number(t)})})))})}},window.foodnet.measurements.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1})).map((function(e){return r.a.createElement(j.a.Option,{key:e.id},e.name)}))),a.type,"Should not be blank")}}],a=this.state.ingredients.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1}));return this.state.ingredients.length>0&&r.a.createElement(x.a,{columns:n,dataSource:a,pagination:!1,rowKey:"id"})}},{key:"renderMultichooser",value:function(){var e=this;return r.a.createElement(j.a,{className:"multi-chooser",mode:"multiple",placeholder:0===window.foodnet.ingredients.length?"Use the gear menu to create new ingredients":"Please select",value:this.state.ingredients.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1})).map((function(e){return{key:e.id}})),disabled:0===window.foodnet.ingredients.length,onChange:function(t){var n=t.map((function(e){return Number(e.key)})),a=e.state.ingredients.map((function(e){return e.id})).filter((function(e){return-1!==n.indexOf(e)})),r=n.filter((function(t){return-1===e.state.ingredients.map((function(e){return e.id})).indexOf(t)}));e.setState({ingredients:e.state.ingredients.filter((function(e){return-1!==a.indexOf(e.id)})).concat(r.map((function(e){return T({},window.foodnet.ingredients.find((function(t){return t.id===e})))}))).sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1}))})},labelInValue:!0},window.foodnet.ingredients.sort((function(e,t){return e.name.toLowerCase()<t.name.toLowerCase()?-1:1})).map((function(e){return r.a.createElement(j.a.Option,{key:e.id,value:e.id},e.name)})))}},{key:"renderIngAddButton",value:function(){var e=this;return r.a.createElement(h.a,{onClick:function(){e.setState({modal:"add"})}},"Create New Ingredient")}},{key:"renderIngEditButton",value:function(){var e=this;return r.a.createElement(h.a,{onClick:function(){e.setState({modal:"edit"})}},"Edit Existing Ingredients")}},{key:"renderTypeAddButton",value:function(){var e=this;return r.a.createElement(h.a,{onClick:function(){e.setState({tmodal:"add"})}},"Create New Measurement")}},{key:"renderTypeEditButton",value:function(){var e=this;return r.a.createElement(h.a,{onClick:function(){e.setState({tmodal:"edit"})}},"Edit Existing Measurements")}},{key:"validateForm",value:function(){if(!(this.state.name&&this.state.name.length>0&&this.state.ingredients&&this.state.ingredients.length>0))return!0;for(var e in this.state.ingredients||[]){var t=this.state.ingredients[e];if(!t.type||!t.qty)return!0}return!1}}]),t}(r.a.Component),D=(n(454),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={modal:!1},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.renderToolbar(),this.renderList(),this.renderModal())}},{key:"renderList",value:function(){var e=this;return r.a.createElement(p,{selected:window.foodnet.selected,select:function(t){return e.forceUpdate()}})}},{key:"renderToolbar",value:function(){var e=this;return r.a.createElement(w,{selected:window.foodnet.selected,showModal:function(t){return e.setState({modal:t})},delete:function(){return e.handleDelete()}})}},{key:"handleDelete",value:function(){var e;e=window.foodnet.selected,window.foodnet.events.find((function(t){return t.recipe===e}))?y.a.error("This recipe is still being used. Please remove or replace the recipe where it is being used before deleting."):(window.foodnet.recipes=window.foodnet.recipes.filter((function(e){return e.id!==window.foodnet.selected})),window.foodnet.selected=void 0,window.foodnet.sync(),this.forceUpdate())}},{key:"renderModal",value:function(){var e=this;return this.state.modal&&r.a.createElement(v.a,{width:"90%",visible:!0,footer:null,onCancel:function(){return e.setState({modal:void 0})},maskClosable:!1,keyboard:!0},r.a.createElement(P,{edit:"edit"===this.state.modal?window.foodnet.selected:void 0,close:function(){return e.setState({modal:void 0})}}))}}]),t}(r.a.Component)),R=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(P,null)}}]),t}(r.a.Component),L=(n(455),Object(c.e)((function(e){return r.a.createElement(F,e)}))),F=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return r.a.createElement(C.a,{onClick:function(t){return function(t){switch(t){case"recipes":e.props.history.push("");break;case"planner":e.props.history.push("Planner");break;case"shopper":e.props.history.push("Shopper");break;case"importexport":e.props.history.push("ImportExport");break;case"reports":e.props.history.push("Reports")}}(t.key)},selectedKeys:[function(){var t=e.props.location.pathname.substring(1);switch(t){case"ImportExport":case"Reports":case"Planner":case"Shopper":return t.toLowerCase();default:return"recipes"}}()],mode:"horizontal"},r.a.createElement(C.a.Item,{key:"recipes"},r.a.createElement(S.a,{type:"heart",theme:"twoTone",twoToneColor:"#eb2f96"}),"Recipes"),r.a.createElement(C.a.Item,{key:"planner"},r.a.createElement(S.a,{type:"calendar",theme:"twoTone"}),"Planner"),r.a.createElement(C.a.Item,{key:"shopper"},r.a.createElement(S.a,{type:"shopping",theme:"twoTone"}),"Shopper"),r.a.createElement(C.a.Item,{key:"reports"},r.a.createElement(S.a,{type:"align-left"}),"Reports"),r.a.createElement(C.a.Item,{key:"importexport"},r.a.createElement(S.a,{type:"setting"}),"Import/Export"))}}]),t}(r.a.Component),q=(n(457),n(35)),_=n.n(q);function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(e){var t=_.a.read(e,{type:"array"}),n=_.a.utils.sheet_to_json(t.Sheets.Recipes);window.foodnet.recipes=n.map((function(e){return U({},e,{ingredients:JSON.parse(e.ingredientsJson)})}));var a=_.a.utils.sheet_to_json(t.Sheets.Ingredients);window.foodnet.ingredients=a.map((function(e){return U({},e,{tags:JSON.parse(e.tagsJson)})})),window.foodnet.measurements=_.a.utils.sheet_to_json(t.Sheets.Measurements),window.foodnet.events=_.a.utils.sheet_to_json(t.Sheets.Events),window.foodnet.sync()},V=n(598),B=(n(463),n(282)),J=n.n(B),G=(n(480),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={filename:"backup.xlsx",allowedFileExtensions:["xlsx","xlsm","xlsb","xml","xls","xlw","csv","txt","dif","sylk","slk","prn","ods","fods","dbf","eth"].map((function(e){return"."+e}))},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return window.File&&window.FileReader&&window.FileList&&window.Blob?r.a.createElement("div",{className:"import-export"},r.a.createElement(h.a,{onClick:function(){return e.setState({saveModal:!0})}},"Export To Excel"),r.a.createElement(h.a,{onClick:function(){return e.setState({loadModal:!0})}},"Import From Excel"),r.a.createElement(h.a,{onClick:function(){return e.setState({urlModal:!0})}},"Import From Url"),this.state.saveModal&&r.a.createElement(v.a,{className:"save-modal",visible:!0,onCancel:function(){return e.setState({saveModal:!1})},onOk:function(){!function(e){var t=_.a.utils.book_new();_.a.utils.book_append_sheet(t,_.a.utils.json_to_sheet(window.foodnet.recipes.map((function(e){return U({},e,{ingredientsJson:JSON.stringify(e.ingredients)})}))),"Recipes"),_.a.utils.book_append_sheet(t,_.a.utils.json_to_sheet(window.foodnet.ingredients.map((function(e){return U({},e,{tagsJson:JSON.stringify(e.tags||[])})}))),"Ingredients"),_.a.utils.book_append_sheet(t,_.a.utils.json_to_sheet(window.foodnet.measurements),"Measurements"),_.a.utils.book_append_sheet(t,_.a.utils.json_to_sheet(window.foodnet.events),"Events"),_.a.writeFile(t,e||"foodnet.xlsx")}(e.getFilename()),e.setState({saveModal:!1})}},r.a.createElement(E.a.Item,{label:"File Name"},r.a.createElement(k.a,{value:this.state.filename,onChange:function(t){return e.setState({filename:t.target.value})}}))),this.state.loadModal&&r.a.createElement(v.a,{className:"load-modal",visible:!0,onCancel:function(){return e.setState({loadModal:!1})},okButtonProps:{disabled:!this.state.file},onOk:function(){var t=new FileReader;t.onload=function(e){K(e.target.result)},t.readAsArrayBuffer(e.state.file),e.setState({loadModal:!1})}},r.a.createElement(E.a.Item,{label:""},r.a.createElement(k.a,{type:"file",id:"file",name:"file",accept:this.state.allowedFileExtensions.join(","),onChange:function(t){e.setState({file:t.target.files[0]})}}))),this.state.urlModal&&this.urlModal()):r.a.createElement("div",null,"Error: your browser does not support the File API specification. It is required for long term storage.")}},{key:"urlModal",value:function(){var e=this,t=function(){return!(!e.state.url||0===e.state.url.length)&&(!e.state.urlError&&(!!e.state.url.startsWith("http")&&-1!==e.state.url.indexOf("://")))};return r.a.createElement(v.a,{className:"url-modal",visible:!0,onCancel:function(){return e.setState({urlModal:!1})},okButtonProps:{disabled:!t()},onOk:function(){J.a.get(function(e){if(e&&e.indexOf("www.dropbox.com"))return e.replace("www.dropbox.com","dl.dropboxusercontent.com")}(e.state.url),{responseType:"arraybuffer"}).then((function(t){if(200!==t.status)e.setState({urlError:"".concat(t.status?t.response.status+" - ":"").concat(t.statusText?t.response.statusText+": ":"").concat(t.data||"")});else try{K(t.data),-1===window.foodnet.importUrls.indexOf(e.state.url)&&(window.foodnet.importUrls.push(e.state.url),window.foodnet.sync()),e.setState({urlModal:void 0,url:void 0})}catch(n){console.log(n),e.setState({urlError:"Could not parse file: "+n})}})).catch((function(t){console.log(t),t.response||(t.response={statusText:"error: CORS blocking"}),console.log("".concat(t.response.status?t.response.status+" - ":"").concat(t.response.statusText?t.response.statusText+": ":"").concat(t.response.data||"")),e.setState({urlError:"".concat(t.response.status?t.response.status+" - ":"").concat(t.response.statusText?t.response.statusText:"")})}))}},r.a.createElement(E.a.Item,{label:"Remote URL",validateStatus:t()?"success":"error",help:this.state.urlError||(e.state.url&&0!==e.state.url.length?e.state.urlError?void 0:e.state.url.startsWith("http")?-1===e.state.url.indexOf("://")?"URL is not in the correct format (i.e. http://example.com)":void 0:"URL must begin with http or https":"Cannot be blank")},r.a.createElement(V.a,{style:{width:200},value:this.state.url,onChange:function(t){e.setState({url:t,urlError:void 0})}},window.foodnet.importUrls.map((function(e){return r.a.createElement(V.a.Option,{key:e},e)})))))}},{key:"getFilename",value:function(){var e=this.state.filename;for(var t in this.state.allowedFileExtensions)if(e.endsWith(this.state.allowedFileExtensions[t]))return e;return e+".xlsx"}}]),t}(r.a.Component)),W=(n(493),n(588)),z=n(593),Y=n(591),H=W.a.Sider,Q=W.a.Content,$=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={menu:"r1"},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(W.a,{className:"reports-layout"},r.a.createElement(H,{collapsible:!0},this.renderMenu()),r.a.createElement(Q,null,this.renderSelectedMenuItem()))}},{key:"renderSelectedMenuItem",value:function(){switch(this.state.menu){case"r1":return this.renderCookingReferenceReport();case"r1p2":return this.renderCookingReferenceReportPage2();case"r2":return this.renderTopFavoritesReport();default:return}}},{key:"renderMenu",value:function(){var e=this;return r.a.createElement(C.a,{onClick:function(t){return e.setState({menu:t.key})},defaultSelectedKeys:["r1"],defaultOpenKeys:["r"],mode:"inline",style:{height:"100%"}},r.a.createElement(C.a.SubMenu,{key:"r",title:r.a.createElement("span",null,r.a.createElement(S.a,{type:"heart",theme:"twoTone",twoToneColor:"#eb2f96"}),r.a.createElement("span",null,"Recipe Reports"))},r.a.createElement(C.a.Item,{key:"r1"},"Cooking Reference"),r.a.createElement(C.a.Item,{key:"r2"},"Top Favorites")))}},{key:"renderCookingReferenceReport",value:function(){var e=this,t=function(t){t&&1===t.length&&"0-0"===t[0]?e.setState({r1checkedKeys:window.foodnet.recipes.map((function(e){return e.id.toString()}))}):e.setState({r1checkedKeys:t})};return r.a.createElement("div",{className:"recipe-select"},r.a.createElement(z.a,{checkable:!0,onSelect:function(e){return t(e)},onCheck:function(e){return t(e)},expandedKeys:["0-0"],checkedKeys:this.state.r1checkedKeys},r.a.createElement(z.a.TreeNode,{title:"All Recipes",key:"0-0"},window.foodnet.recipes.map((function(e){return r.a.createElement(z.a.TreeNode,{title:e.name,key:e.id})})))),r.a.createElement(h.a,{disabled:!this.state.r1checkedKeys||this.state.r1checkedKeys.length<1,onClick:function(){e.setState({menu:"r1p2"})}},"Generate Report"))}},{key:"renderCookingReferenceReportPage2",value:function(){var e=this;return r.a.createElement("div",{className:"recipe-report"},window.foodnet.recipes.filter((function(t){return-1!==e.state.r1checkedKeys.indexOf(t.id.toString())})).map((function(e){return r.a.createElement(Y.a,{key:e.id,size:"small"},r.a.createElement("div",{className:"recipe",key:e.id},r.a.createElement("div",{className:"recipe-name"},"Recipe Name:"),r.a.createElement("div",null,e.name),r.a.createElement("div",{className:"desc-header"},"Instructions:"),r.a.createElement("div",{className:"desc-body"},e.desc||"None"),r.a.createElement("div",{className:"ing"},"Ingredients:"),r.a.createElement("div",{className:"ingredient-list"},e.ingredients.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("div",null,window.foodnet.ingredients.find((function(t){return t.id===e.id})).name,", ",e.qty," ",window.foodnet.measurements.find((function(t){return t.id===e.type})).name))})))))})))}},{key:"renderTopFavoritesReport",value:function(){return r.a.createElement("div",null,"Coming Soon")}}]),t}(r.a.Component),X=(n(494),n(111)),Z=n(597),ee=n(284),te=n(599),ne=n(596),ae=n(12),re=n.n(ae),ie=(n(495),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={mode:"list",listDays:Number.isInteger(window.foodnet.listDays)?window.foodnet.listDays:7},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"planner"},this.renderToolbar(),"calendar"===this.state.mode&&this.renderCalendar(),"list"===this.state.mode&&this.renderList()),this.renderAddListItemModal())}},{key:"renderToolbar",value:function(){var e=this;return r.a.createElement("div",{className:"planner-toolbar"},r.a.createElement(X.a.Group,{onChange:function(t){return e.setState({mode:t.target.value})},value:this.state.mode},r.a.createElement(X.a,{value:"list"},"List View"),r.a.createElement(X.a,{value:"calendar"},"Calendar View")),"list"===this.state.mode&&r.a.createElement(k.a,{type:"number",value:this.state.listDays,onChange:function(t){if(0===t.target.value.length)e.setState({listDays:void 0});else{var n=Number(t.target.value);n<0&&(n=0),e.setState({listDays:n}),window.foodnet.listDays=n,window.foodnet.sync()}}}))}},{key:"renderAddListItemModal",value:function(){var e=this,t=function(){return e.state.recipe},n=function(){e.state.eventid?window.foodnet.events=window.foodnet.events.filter((function(t){return t.id!==e.state.eventid})).concat({id:e.state.eventid,date:re()().add(e.state.dayOffset,"days").format(),qty:Number(e.state.qty||1),recipe:e.state.recipe}):window.foodnet.events.push({id:0===window.foodnet.events.length?1:Math.max.apply(Math,Object(g.a)(window.foodnet.events.map((function(e){return e.id}))))+1,date:re()().add(e.state.dayOffset,"days").format(),qty:Number(e.state.qty||1),recipe:e.state.recipe}),window.foodnet.sync(),e.setState({eventid:void 0,recipe:void 0,qty:void 0,dayOffset:void 0,modal:void 0})};return("add-list-item"===this.state.modal||"edit-list-item"===this.state.modal)&&r.a.createElement(v.a,{className:"list-item-modal",visible:!0,onCancel:function(){return e.setState({modal:void 0})},footer:["edit-list-item"===this.state.modal&&r.a.createElement(h.a,{key:"delete",type:"danger",onClick:function(){window.foodnet.events=window.foodnet.events.filter((function(t){return t.id!==e.state.eventid})),window.foodnet.sync(),e.setState({eventid:void 0,recipe:void 0,qty:void 0,dayOffset:void 0,modal:void 0})}},"Delete Event"),r.a.createElement(h.a,{key:"back",onClick:function(){return e.setState({modal:void 0})}},"Cancel"),r.a.createElement(h.a,{key:"submit",type:"primary",disabled:!t(),onClick:function(){return n()}},"OK")]},r.a.createElement(E.a,{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:12}}},r.a.createElement(E.a.Item,{validateStatus:t()?"success":"error",hasFeedback:!0,label:"Recipe"},r.a.createElement(j.a,{value:this.state.recipe,onChange:function(t){return e.setState({recipe:Number(t)})}},window.foodnet.recipes.map((function(e){return r.a.createElement(j.a.Option,{key:e.id,value:e.id},e.name)})))),r.a.createElement(E.a.Item,{label:"Quantity"},r.a.createElement(k.a,{autoFocus:!0,type:"number",defaultValue:1,value:this.state.qty,onChange:function(t){return e.setState({qty:t.target.value})},onPressEnter:function(){t()&&n()}}))))}},{key:"renderList",value:function(){var e=this,t=function(t){return r.a.createElement(Z.a,{key:t},r.a.createElement(Z.a.Item,{key:"top",color:"blue"},r.a.createElement("b",null,r.a.createElement("u",null,re()().add(t,"days").format("dddd (MMM D)")))),function(t){return window.foodnet.events.filter((function(e){return re()().add(t,"days").format("Y-M-D")===re()(e.date).format("Y-M-D")})).sort((function(e,t){return e.id<t.id?-1:1})).map((function(n){return r.a.createElement(Z.a.Item,{key:n.id,color:"green",onClick:function(){e.setState({eventid:n.id,modal:"edit-list-item",dayOffset:t,recipe:n.recipe,qty:n.qty})}},n.qty," x ",window.foodnet.recipes.find((function(e){return e.id===n.recipe})).name)}))}(t),function(t){return r.a.createElement(Z.a.Item,{key:"add",onClick:function(){e.setState({eventid:void 0,modal:"add-list-item",dayOffset:t,recipe:void 0,qty:void 0})},dot:r.a.createElement(S.a,{type:"plus-circle",theme:"twoTone",twoToneColor:"red"})},"Add")}(t))};return r.a.createElement("div",{className:"planner-list"},Array.from(Array(this.state.listDays)).map((function(e,n){return t(n)})))}},{key:"renderCalendar",value:function(){var e=this;return r.a.createElement(ne.a,{mode:this.state.calMode||"month",onPanelChange:function(t,n){return e.setState({calMode:n})},dateCellRender:function(t){var n=window.foodnet.events.filter((function(e){return re()(e.date).format("Y-M-D")===t.format("Y-M-D")})).map((function(e){var t="".concat(e.qty," x ").concat(window.foodnet.recipes.find((function(t){return t.id===e.recipe})).name),n=re()(e.date).startOf("day").diff(re()().startOf("day"),"days");return{eid:e.id,dayOffset:n,type:n<0?"error":0===n?"success":"warning",content:r.a.createElement(ee.a,{placement:"top",title:t},t)}}));return r.a.createElement("ul",{className:"events"},n.map((function(t){return r.a.createElement("li",{key:t.eid},r.a.createElement(te.a,{onClick:function(n){var a=window.foodnet.events.find((function(e){return e.id===t.eid})),r=t.dayOffset;e.setState({eventid:a.id,modal:"edit-list-item",dayOffset:r,recipe:a.recipe,qty:a.qty}),n.stopPropagation()},status:t.type,text:t.content}))})))},monthCellRender:function(e){return window.foodnet.events.filter((function(t){return re()(t.date).month()===e.month()&&re()(t.date).year()===e.year()})).length+" recipes"},onSelect:function(t){if("year"!==e.state.calMode){var n=t.startOf("day").diff(re()().startOf("day"),"days");e.setState({eventid:void 0,modal:"add-list-item",dayOffset:n,recipe:void 0,qty:void 0})}else e.setState({calMode:"month"})}})}}]),t}(r.a.Component)),oe=(n(585),n(590)),se=n(101),ce=n(286),le=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=function(){var t=e.state.inputValue;e.setState({inputVisible:!1,inputValue:""}),e.props.add(t)};return r.a.createElement("div",{className:this.props.className||""},this.props.tags.map((function(t,n){var a=t.length>20,i=r.a.createElement(ce.a,{key:t,closable:!0,onClose:function(){return e.props.remove(t)}},a?"".concat(t.slice(0,20),"..."):t);return a?r.a.createElement(ee.a,{title:t,key:t},i):i})),this.state.inputVisible&&r.a.createElement(k.a,{ref:function(t){return e.input=t},type:"text",size:"small",style:{width:78},value:this.state.inputValue,onChange:function(t){return e.setState({inputValue:t.target.value})},onBlur:t,onPressEnter:t}),!this.state.inputVisible&&r.a.createElement(ce.a,{onClick:function(){return e.setState({inputVisible:!0},(function(){return e.input.focus()}))},style:{background:"#fff",borderStyle:"dashed"}},r.a.createElement(S.a,{type:"plus"})," New Tag"))}}]),t}(r.a.Component);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(n,!0).forEach((function(t){Object(b.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fe=oe.a.RangePicker,me=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={checkedItems:[],filteredTags:[]},n}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState({dates:window.foodnet.plannerDates&&2===window.foodnet.plannerDates.length?window.foodnet.plannerDates.map((function(e){return re()(e)})):void 0,checkedItems:window.foodnet.plannerCheckedItems||[]})}},{key:"render",value:function(){var e=this,t=function(t,n){var a=e.state.filteredTags;a=n?a.concat(t):a.filter((function(e){return e!==t})),e.setState({filteredTags:a})},n=function(){var e=[];return window.foodnet.ingredients.forEach((function(t){(t.tags||[]).forEach((function(t){-1===e.indexOf(t)&&(e=e.concat(t))}))})),[r.a.createElement(C.a.Item,{key:"_NO_TAG"},r.a.createElement(se.a,{onChange:function(e){return t("_NO_TAG",e.target.checked)}},"Untagged"))].concat(e.sort((function(e,t){return e.toLowerCase()<t.toLowerCase?-1:1})).map((function(e){return r.a.createElement(C.a.Item,{key:e},r.a.createElement(se.a,{onChange:function(n){return t(e,n.target.checked)}},e))})))};return r.a.createElement("div",{className:"shopper"},r.a.createElement("div",{className:"buttons"},r.a.createElement(h.a,{disabled:!0,onClick:function(){return e.setState({modal:"sort"})}},"Sort by Tags"),r.a.createElement(O.a,{disabled:1===n().length,onVisibleChange:function(t){return e.setState({dropdownvisible:t})},visible:this.state.dropdownvisible,overlay:r.a.createElement(C.a,null,n())},r.a.createElement(h.a,null,"Filter by Tags")),r.a.createElement(h.a,{onClick:function(){return e.setState({hideTags:!e.state.hideTags})}},this.state.hideTags?"Show Tags":"Hide Tags")),r.a.createElement(fe,{value:this.state.dates,onChange:function(t){e.setState({dates:t,checkedItems:[]}),window.foodnet.plannerDates=t.map((function(e){return e.format()})),window.foodnet.plannerCheckedItems=[],window.foodnet.sync()}}),this.state.dates&&this.createIngredientList())}},{key:"createIngredientList",value:function(){var e=this,t=window.foodnet,n=[];t.events.forEach((function(a){var r;if((r=re()(a.date)).isBetween.apply(r,Object(g.a)(e.state.dates).concat(["days","[]"]))){var i=Number(a.qty)||0;t.recipes.find((function(e){return e.id===a.recipe})).ingredients.forEach((function(e){n.push({id:e.id,type:e.type,qty:Number(e.qty)*i})}))}}));return n=n.sort((function(e,t){return e.id!==t.id?e.id<t.id?-1:1:e.type!==t.type?e.type<t.type?-1:1:0})).map((function(e,t,n){if(t>0&&n[t-1].id===e.id&&n[t-1].type===e.type){for(var a=t-1;n[a].deleted;)a--;n[a].qty+=e.qty,e.deleted=!0}return e})).filter((function(e){return!e.deleted})),r.a.createElement("ul",{className:"ingredient-list"},n.map((function(n){return ue({},n,{name:t.ingredients.find((function(e){return e.id===n.id})).name,typename:t.measurements.find((function(e){return e.id===n.type})).name,checked:-1!==e.state.checkedItems.indexOf(n.id),tags:t.ingredients.find((function(e){return e.id===n.id})).tags||[]})})).sort((function(e,t){return e.name.toLowerCase()!==t.name.toLowerCase()?e.name.toLowerCase()<t.name.toLowerCase()?-1:1:e.typename.toLowerCase()!==t.typename.toLowerCase()?e.typename.toLowerCase()<t.typename.toLowerCase()?-1:1:0})).filter((function(t){if(0===e.state.filteredTags.length)return!0;var n=t.tags;0===n.length&&(n=["_NO_TAG"]);var a=!1;return n.forEach((function(t){e.state.filteredTags.forEach((function(e){t===e&&(a=!0)}))})),a})).map((function(n,a){return r.a.createElement("li",{key:a,className:"shopper-list-items"},r.a.createElement(se.a,{className:"shopper-list-item",key:a,checked:n.checked,onChange:function(a){t.plannerCheckedItems=t.plannerCheckedItems.filter((function(e){return e!==n.id})),a.target.checked&&(t.plannerCheckedItems=t.plannerCheckedItems.concat(n.id)),e.setState({checkedItems:t.plannerCheckedItems}),t.sync()}},"".concat(n.name,": ").concat(n.qty," ").concat(n.typename)),!e.state.hideTags&&r.a.createElement(le,{className:"shopper-tags",tags:n.tags,add:function(a){var r=t.ingredients.find((function(e){return e.id===n.id}));t.ingredients=t.ingredients.filter((function(e){return e.id!==n.id})).concat(ue({},r,{tags:Object(g.a)(n.tags).concat(a)})),t.sync(),e.forceUpdate()},remove:function(a){var r=t.ingredients.find((function(e){return e.id===n.id}));t.ingredients=t.ingredients.filter((function(e){return e.id!==n.id})).concat(ue({},r,{tags:Object(g.a)(n.tags).filter((function(e){return e!==a}))})),t.sync(),e.forceUpdate(),-1!==e.state.filteredTags.indexOf(a)&&e.setState({filteredTags:e.state.filteredTags.filter((function(e){return e!==a}))})}}))})))}}]),t}(r.a.Component);!function(){var e=["ingredients","measurements","recipes","listDays","events","importUrls","plannerDates","plannerCheckedItems"];window.foodnet={sync:function(){e.forEach((function(e){return localStorage.setItem(e,JSON.stringify(window.foodnet[e]))}))}},e.forEach((function(e){return window.foodnet[e]=JSON.parse(localStorage.getItem(e))})),e.forEach((function(e){void 0!==window.foodnet[e]&&null!==window.foodnet[e]||(window.foodnet[e]=[])}))}();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(586);o.a.render(r.a.createElement((function(){return r.a.createElement(s.a,{hashType:"noslash"},r.a.createElement(L,null),r.a.createElement(c.a,{exact:!0,path:"/ImportExport",component:G}),r.a.createElement(c.a,{exact:!0,path:"/TestRecipeForm",component:R}),r.a.createElement(c.a,{exact:!0,path:"/Reports",component:$}),r.a.createElement(c.a,{exact:!0,path:"/Planner",component:ie}),r.a.createElement(c.a,{exact:!0,path:"/Shopper",component:me}),r.a.createElement(c.a,{exact:!0,path:"/",component:D}))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[290,1,2]]]);
//# sourceMappingURL=main.a95bdda8.chunk.js.map