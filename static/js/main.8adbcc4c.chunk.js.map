{"version":3,"sources":["recipe/RecipeList.jsx","recipe/RecipeToolbar.jsx","recipe/IngredientForm.jsx","admin/EntityUsageChecker.js","recipe/TypeForm.jsx","recipe/RecipeForm.jsx","recipe/RecipeApp.jsx","manual-test/TestRecipeForm.jsx","AppHeader.jsx","loaders/ExcelLoader.js","admin/ImportExport.jsx","reports/Reports.jsx","planner/Planner.jsx","shopper/Tags.jsx","shopper/Shopper.jsx","loaders/LocalStorageLoader.js","App.jsx","serviceWorker.js","index.js"],"names":["state","className","window","foodnet","recipes","sort","a","b","name","toLowerCase","map","r","createRecipe","key","id","selected","onClick","props","select","columns","title","dataIndex","dataSource","type","icount","ingredients","length","pagination","rowKey","rowClassName","onRow","setState","selectedRowKeys","React","Component","showModal","disabled","this","delete","isNameUnique","takenNames","it","edit","filter","indexOf","submit","find","trim","close","push","Math","max","sync","labelCol","xs","span","sm","wrapperCol","renderPicker","Item","label","validateStatus","hasFeedback","help","undefined","autoFocus","value","placeholder","onChange","v","target","onPressEnter","validate","i","message","error","toString","Number","Option","measurements","recipe","renderConfigMenu","renderMultichooser","renderTable","TextArea","desc","autosize","minRows","maxRows","validateForm","concat","newId","renderModal","renderTModal","trigger","overlay","e","modal","tmodal","Divider","width","visible","footer","onCancel","wrapFormItemOnError","cmp","validation","errorText","render","qty","filterOption","inputValue","option","children","inp","String","z","m","data","mode","values","ids","idsToKeep","idsToAdd","it2","it3","labelInValue","item","renderToolbar","renderList","forceUpdate","handleDelete","events","maskClosable","keyboard","withRouter","AppHeader","history","handleClick","selectedKeys","path","location","pathname","substring","findSelectionFromRoute","theme","twoToneColor","load","input","wb","XLSX","read","utils","sheet_to_json","Sheets","Recipes","JSON","parse","ingredientsJson","Ingredients","tags","tagsJson","Measurements","Events","filename","allowedFileExtensions","File","FileReader","FileList","Blob","saveModal","loadModal","urlModal","onOk","book_new","book_append_sheet","json_to_sheet","stringify","writeFile","save","getFilename","okButtonProps","file","fileReader","onload","result","readAsArrayBuffer","accept","join","files","validateUrl","url","urlError","startsWith","axios","get","replace","dropboxHack","responseType","then","status","response","statusText","importUrls","console","log","catch","style","endsWith","Sider","Layout","Content","menu","collapsible","renderMenu","renderSelectedMenuItem","renderCookingReferenceReport","renderCookingReferenceReportPage2","renderTopFavoritesReport","defaultSelectedKeys","defaultOpenKeys","height","SubMenu","check","r1checkedKeys","checkable","onSelect","onCheck","expandedKeys","checkedKeys","TreeNode","size","listDays","isInteger","renderCalendar","renderAddListItemModal","Group","valid","eventid","date","moment","add","dayOffset","format","defaultValue","createList","color","createItemsForDay","dot","addForDay","Array","from","day","calMode","onPanelChange","dateCellRender","listData","text","startOf","diff","eid","content","placement","event","stopPropagation","monthCellRender","month","year","tagColors","handleInputConfirm","inputVisible","tag","index","isLongTag","tagElem","closable","onClose","remove","slice","ref","onBlur","focus","background","borderStyle","RangePicker","DatePicker","checkedItems","filteredTags","dates","plannerDates","plannerCheckedItems","customSort","customSortOrder","updateTags","checked","t","getTags","createMenu","onDragEnd","fromIndex","toIndex","newTags","splice","onVisibleChange","dropdownvisible","hideTags","createIngredientList","nodeSelector","handleSelector","forEach","ing","localeCompare","ai","bi","list","isBetween","multiplier","l","newIndex","deleted","sortedTags","typename","found","t2","findHighestTag","reduce","highestTag","ti","hi","aTag","bTag","names","localStorage","setItem","getItem","loader","Boolean","hostname","match","ReactDOM","hashType","exact","component","ImportExport","TestRecipeForm","Reports","Planner","Shopper","RecipeApp","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.8adbcc4c.chunk.js","sourcesContent":["import React from 'react';\r\nimport './RecipeList.css';\r\nimport { Table } from 'antd';\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n\r\n    }\r\n\r\n    render2() {\r\n        return (<div className=\"recipe-list\">\r\n            {window.foodnet.recipes.sort((a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1).map(r => this.createRecipe(r))}\r\n        </div>)\r\n    }\r\n\r\n    createRecipe2(r) {\r\n        return (\r\n            <div key={r.id} className={\"recipe-list-item\" + (window.foodnet.selected === r.id ? \" selected\" : \"\")}\r\n                onClick={() => { window.foodnet.selected = r.id; this.props.select(r.id); }}\r\n            >\r\n                {r.name}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        const cols = [\r\n            {\r\n                title: 'Recipe Name',\r\n                dataIndex: 'name',\r\n            },\r\n            {\r\n                title: 'Type',\r\n                dataIndex: 'type'\r\n            },\r\n            {\r\n                title: 'Ingredients',\r\n                dataIndex: 'icount'\r\n            },\r\n        ]\r\n        return (\r\n            <Table\r\n                columns={cols}\r\n                dataSource={window.foodnet.recipes\r\n                    .sort((a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1)\r\n                    .map(r => ({\r\n                        ...r,\r\n                        type: 'Custom',\r\n                        icount: (r.ingredients || []).length\r\n                    }))\r\n                }\r\n                pagination={false}\r\n                rowKey={'id'}\r\n                rowClassName={(r) => \"recipe-list-item\" + (window.foodnet.selected === r.id ? \" selected\" : \"\")}\r\n                onRow={(r) => ({\r\n                    onClick: () => {\r\n                        window.foodnet.selected = r.id; \r\n                        this.props.select(r.id);\r\n                        this.setState({selectedRowKeys: [r.id]});\r\n                    },\r\n                })}\r\n            />\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport { Button } from 'antd';\r\nimport './RecipeToolbar.css';\r\n\r\nexport default class extends React.Component {\r\n    render() {\r\n        return (\r\n            <div className=\"recipe-toolbar\">\r\n                <Button onClick={() => this.props.showModal('add')}>Add</Button>\r\n                <Button disabled={!this.props.selected} onClick={() => this.props.showModal('edit')}>Edit</Button>\r\n                <Button disabled={!this.props.selected} onClick={() => this.props.delete()}>Delete</Button>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport { Form, Button, Input, Select, message } from 'antd';\r\nimport {isIngredientUsed} from '../admin/EntityUsageChecker'\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    render() {\r\n        const formItemLayout = {\r\n            labelCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 6 },\r\n            },\r\n            wrapperCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 12 },\r\n            },\r\n        };\r\n        const isNameUnique = () => {\r\n            let takenNames = window.foodnet.ingredients.map(it => it.name);\r\n            if (this.props.edit) {\r\n                takenNames = window.foodnet.ingredients.filter(it => it.id !== this.state.id).map(it => it.name);\r\n            }\r\n            return takenNames.indexOf(this.state.name) === -1;\r\n        }\r\n        const submit = () => {\r\n            if (this.props.edit) {\r\n                const i = window.foodnet.ingredients.find(it => it.id === this.state.id);\r\n                i.name = this.state.name.trim();\r\n                this.props.close();\r\n            }\r\n            else {\r\n                window.foodnet.ingredients.push({\r\n                    id: window.foodnet.ingredients.length === 0 ? 1 : Math.max(...window.foodnet.ingredients.map(it => it.id)) + 1,\r\n                    name: this.state.name.trim(),\r\n                });\r\n                window.foodnet.sync();\r\n                this.props.close();\r\n            }\r\n        }\r\n        return (\r\n            <>\r\n                <Form {...formItemLayout}>\r\n                    {this.props.edit && this.renderPicker()}\r\n                    <Form.Item\r\n                        label={this.props.edit ? \"New Name\" : \"Name\"}\r\n                        validateStatus={this.state.name && isNameUnique() ? \"success\" : \"error\"}\r\n                        hasFeedback\r\n                        help={this.state.name && isNameUnique() ? undefined : !this.state.name ? \"Should not be blank\" : \"Name should be unique\"}\r\n                    >\r\n                        <Input autoFocus value={this.state.name} placeholder=\"Enter a name\"\r\n                            onChange={(v) => this.setState({ name: v.target.value })}\r\n                            onPressEnter={() => {\r\n                                if (!this.validate()) {\r\n                                    submit();\r\n                                }\r\n                            }}\r\n                        />\r\n                    </Form.Item>\r\n                </Form>\r\n                <div className=\"footer\">\r\n                    {this.props.edit && <Button key=\"delete\" type=\"danger\" disabled={!this.state.id} onClick={() => {\r\n                        if (isIngredientUsed(this.state.id)) {\r\n                            message.error(\"This ingredient is still being used. Please remove, replace, or rename the ingredient where it is being used before deleting.\")\r\n                        }\r\n                        else {\r\n                            window.foodnet.ingredients = window.foodnet.ingredients.filter(it => it.id !== this.state.id)\r\n                            window.foodnet.sync()\r\n                            this.props.close()\r\n                        }\r\n                    }}>Delete</Button>}\r\n                    <Button key=\"back\" onClick={() => this.props.close()}>Cancel</Button>\r\n                    <Button type=\"primary\" disabled={this.validate()} onClick={() => submit()}>\r\n                        Submit\r\n                    </Button>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    renderPicker() {\r\n        return (\r\n            <Form.Item label=\"Choose existing ingredient\" validateStatus={(this.props.edit && !this.state.id) ? 'error' : 'success'} hasFeedback={true}>\r\n                <Select value={this.state.id ? this.state.id.toString() : undefined} onChange={v => {\r\n                    this.setState({ id: Number(v), name: window.foodnet.ingredients.find(it => it.id === Number(v)).name });\r\n                }}>\r\n                    {window.foodnet.ingredients.map(i => (\r\n                        <Select.Option key={i.id} >{i.name}</Select.Option>\r\n                    ))}\r\n                </Select>\r\n            </Form.Item>\r\n        );\r\n    }\r\n\r\n    validate() {\r\n        return !this.state.name || (this.props.edit && !this.state.id);\r\n    }\r\n}","export const isIngredientUsed = (id) => {\r\n    if (window.foodnet.recipes.find(r => r.ingredients.find(i => i.id === id))) {\r\n        return true;\r\n    }\r\n    return false;\r\n}\r\n\r\nexport const isRecipeUsed = (id) => {\r\n    //FIXME: old events = add are you sure prompt\r\n    if (window.foodnet.events.find(e => e.recipe === id)) {\r\n        return true;\r\n    }\r\n    return false;\r\n}  \r\n\r\nexport const isMeasurementUsed = (id) => {\r\n    if (window.foodnet.recipes.find(r => r.ingredients.find(i => i.type === id))) {\r\n        return true;\r\n    }\r\n    return false;\r\n}","import React from 'react';\r\nimport { Form, Button, Input, Select, message } from 'antd';\r\nimport { isMeasurementUsed } from \"../admin/EntityUsageChecker\"\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n    }\r\n\r\n    render() {\r\n        const formItemLayout = {\r\n            labelCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 6 },\r\n            },\r\n            wrapperCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 12 },\r\n            },\r\n        };\r\n        const isNameUnique = () => {\r\n            let takenNames = window.foodnet.measurements.map(it => it.name);\r\n            if (this.props.edit) {\r\n                takenNames = window.foodnet.measurements.filter(it => it.id !== this.state.id).map(it => it.name);\r\n            }\r\n            return takenNames.indexOf(this.state.name) === -1;\r\n        }\r\n        const submit = () => {\r\n            if (this.props.edit) {\r\n                const i = window.foodnet.measurements.find(it => it.id === this.state.id);\r\n                i.name = this.state.name.trim();\r\n            }\r\n            else {\r\n                window.foodnet.measurements.push({\r\n                    id: window.foodnet.measurements.length === 0 ? 1 : Math.max(...window.foodnet.measurements.map(it => it.id)) + 1,\r\n                    name: this.state.name.trim(),\r\n                });\r\n            }\r\n            this.props.close();\r\n            window.foodnet.sync();\r\n        }\r\n        return (\r\n            <>\r\n                <Form {...formItemLayout}>\r\n                    {this.props.edit && this.renderPicker()}\r\n                    <Form.Item\r\n                        label={this.props.edit ? \"New Name\" : \"Name\"}\r\n                        validateStatus={this.state.name && isNameUnique() ? \"success\" : \"error\"}\r\n                        hasFeedback\r\n                        help={this.state.name && isNameUnique() ? undefined : !this.state.name ? \"Should not be blank\" : \"Name should be unique\"}\r\n                    >\r\n                        <Input autoFocus value={this.state.name} placeholder=\"Enter a name\"\r\n                            onChange={(v) => this.setState({ name: v.target.value })}\r\n                            onPressEnter={() => {\r\n                                if (!this.validate()) {\r\n                                    submit();\r\n                                }\r\n                            }}\r\n                        />\r\n                    </Form.Item>\r\n                </Form>\r\n                <div className=\"footer\">\r\n                    {this.props.edit && <Button key=\"delete\" type=\"danger\" disabled={!this.state.id} onClick={() => {\r\n                        if (isMeasurementUsed(this.state.id)) {\r\n                            message.error(\"This measurement is still being used. Please remove, replace, or rename the measurement where it is being used before deleting.\")\r\n                        }\r\n                        else {\r\n                            window.foodnet.measurements = window.foodnet.measurements.filter(it => it.id !== this.state.id)\r\n                            window.foodnet.sync()\r\n                            this.props.close()\r\n                        }\r\n                    }}>Delete</Button>}\r\n                    <Button key=\"back\" onClick={() => this.props.close()}>Cancel</Button>\r\n                    <Button type=\"primary\" disabled={this.validate()} onClick={() => submit()}>\r\n                        Submit\r\n                    </Button>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n\r\n    renderPicker() {\r\n        return (\r\n            <Form.Item label=\"Choose existing measurement\" validateStatus={(this.props.edit && !this.state.id) ? 'error' : 'success'} hasFeedback={true}>\r\n                <Select value={this.state.id ? this.state.id.toString() : undefined} onChange={v => {\r\n                    this.setState({ id: Number(v), name: window.foodnet.measurements.find(it => it.id === Number(v)).name });\r\n                }}>\r\n                    {window.foodnet.measurements.map(i => (\r\n                        <Select.Option key={i.id} >{i.name}</Select.Option>\r\n                    ))}\r\n                </Select>\r\n            </Form.Item>\r\n        );\r\n    }\r\n\r\n    validate() {\r\n        return !this.state.name || (this.props.edit && !this.state.id);\r\n    }\r\n}","import React from 'react';\r\nimport { Form, Button, Input, Dropdown, Menu, Select, Modal, Icon, Table } from 'antd';\r\nimport './RecipeForm.css';\r\nimport IngredientForm from './IngredientForm'\r\nimport TypeForm from './TypeForm'\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        ingredients: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.edit && !this.state.name) {\r\n            const recipe = window.foodnet.recipes.find(r => r.id === this.props.edit);\r\n            this.setState({ ...recipe });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const formItemLayout = {\r\n            labelCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 6 },\r\n            },\r\n            wrapperCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 12 },\r\n            },\r\n        };\r\n        return (\r\n            <>\r\n                <Form {...formItemLayout} className=\"recipe-form\">\r\n                    <Form.Item\r\n                        label=\"Name\"\r\n                        validateStatus={this.state.name ? \"success\" : \"error\"}\r\n                        hasFeedback\r\n                        help={this.state.name ? undefined : \"Should not be blank\"}\r\n                    >\r\n                        <Input placeholder=\"Enter a name\" value={this.state.name} onChange={(v) => this.setState({ name: v.target.value })} />\r\n                    </Form.Item>\r\n\r\n                    {this.renderConfigMenu()}\r\n\r\n                    {this.renderMultichooser()}\r\n                    {this.renderTable()}\r\n                    <Form.Item className=\"instructions\" label=\"Instructions\">\r\n                        <Input.TextArea\r\n                            value={this.state.desc}\r\n                            autosize={{ minRows: 2, maxRows: 6 }}\r\n                            onChange={v => this.setState({ desc: v.target.value })}\r\n                        />\r\n                    </Form.Item>\r\n                </Form>\r\n                <div className=\"footer\">\r\n                    <Button key=\"back\" onClick={() => this.props.close()}>Cancel</Button>\r\n                    <Button type=\"primary\" disabled={this.validateForm()} onClick={() => {\r\n                        if (this.state.id) {\r\n                            window.foodnet.recipes = window.foodnet.recipes.filter(it => it.id !== this.state.id).concat({ ...this.state });\r\n                        }\r\n                        else {\r\n                            const newId = window.foodnet.recipes.length === 0 ? 1 : Math.max(...window.foodnet.recipes.map(r => r.id)) + 1;\r\n                            window.foodnet.recipes.push({ ...this.state, name: this.state.name.trim(), id: newId });\r\n                        }\r\n                        window.foodnet.sync();\r\n                        this.props.close();\r\n                    }}>\r\n                        Submit\r\n                    </Button>\r\n                </div>\r\n                {this.renderModal()}\r\n                {this.renderTModal()}\r\n            </>\r\n        );\r\n    }\r\n\r\n    renderConfigMenu() {\r\n        return (\r\n            <div className=\"config\">\r\n                Configure Ingredients/Measurements\r\n                <Dropdown trigger={['click']} overlay={\r\n                    <Menu onClick={(e) => {\r\n                        switch (e.key) {\r\n                            case \"1\":\r\n                                this.setState({ modal: 'add' })\r\n                                break;\r\n                            case \"2\":\r\n                                this.setState({ modal: 'edit' })\r\n                                break;\r\n                            case \"3\":\r\n                                this.setState({ tmodal: 'add' })\r\n                                break;\r\n                            case \"4\":\r\n                                this.setState({ tmodal: 'edit' })\r\n                                break;\r\n                            default:\r\n                        }\r\n                    }}>\r\n                        <Menu.Item key=\"1\">\r\n                            <Icon type=\"plus\" />Create New Ingredient\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"2\">\r\n                            <Icon type=\"edit\" /> Edit Existing Ingredients\r\n                        </Menu.Item>\r\n                        <Menu.Divider />\r\n                        <Menu.Item key=\"3\">\r\n                            <Icon type=\"plus\" /> Create New Measurement\r\n                        </Menu.Item>\r\n                        <Menu.Item key=\"4\">\r\n                            <Icon type=\"edit\" /> Edit Existing Measurements\r\n                        </Menu.Item>\r\n                    </Menu>\r\n                }>\r\n                    <Icon type=\"setting\" className=\"setting-icon\" />\r\n                </Dropdown>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderModal() {\r\n        return this.state.modal && (\r\n            <Modal width=\"90%\" visible={true} footer={null} onCancel={() => this.setState({ modal: undefined })}>\r\n                <IngredientForm edit={this.state.modal === 'edit' ? true : undefined} close={() => this.setState({ modal: undefined })} />\r\n            </Modal>\r\n        )\r\n    }\r\n\r\n    renderTModal() {\r\n        return this.state.tmodal && (\r\n            <Modal width=\"90%\" visible={true} footer={null} onCancel={() => this.setState({ tmodal: undefined })}>\r\n                <TypeForm edit={this.state.tmodal === 'edit' ? true : undefined} close={() => this.setState({ tmodal: undefined })} />\r\n            </Modal>\r\n        )\r\n    }\r\n\r\n    renderTable() {\r\n        const wrapFormItemOnError = (cmp, validation, errorText) => {\r\n            return (\r\n                <Form.Item validateStatus={!validation ? \"error\" : \"success\"} help={!validation ? errorText : \"\"}>\r\n                    {cmp}\r\n                </Form.Item>\r\n            )\r\n        };\r\n        const columns = [\r\n            {\r\n                title: 'Name',\r\n                dataIndex: 'id',\r\n                key: 'name',\r\n                render: id => {\r\n                    const i = window.foodnet.ingredients.find(it => it.id === id);\r\n                    return <div>{i.name}</div>\r\n                }\r\n            },\r\n            {\r\n                title: 'Amount',\r\n                dataIndex: 'id',\r\n                key: 'qty',\r\n                render: id => {\r\n                    const i = this.state.ingredients.find(it => it.id === id);\r\n                    return (\r\n                        wrapFormItemOnError(<Input type=\"number\" value={i.qty} onChange={v => {\r\n                            this.setState({\r\n                                ingredients: this.state.ingredients.filter(it => it.id !== id).concat([{\r\n                                    ...this.state.ingredients.find(it => it.id === id),\r\n                                    qty: v.target.value\r\n                                }])\r\n                            })\r\n                        }} />, i.qty, \"Should not be blank\")\r\n                    );\r\n                }\r\n            },\r\n            {\r\n                title: 'Type',\r\n                dataIndex: 'id',\r\n                key: 'type',\r\n                render: id => {\r\n                    const i = this.state.ingredients.find(it => it.id === id);\r\n                    return (\r\n                        wrapFormItemOnError(<Select\r\n                            placeholder=\"Type\"\r\n                            filterOption={(inputValue, option) => {\r\n                                const name = option.props.children;\r\n                                const inp = typeof inputValue === 'string' || inputValue instanceof String ? inputValue : inputValue.toString();\r\n                                return (name || \"\").toLowerCase().indexOf((inp || \"\").toLowerCase());\r\n                            }}\r\n                            value={i.type ? i.type.toString() : undefined}\r\n                            onChange={(v) => {\r\n                                this.setState({\r\n                                    ingredients: this.state.ingredients\r\n                                        .filter(z => z.id !== i.id)\r\n                                        .concat(this.state.ingredients\r\n                                            .filter(z => z.id === i.id)\r\n                                            .map(z => ({ ...z, type: Number(v) })))\r\n                                })\r\n                            }}\r\n                        >\r\n                            {window.foodnet.measurements\r\n                                .sort((a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1)\r\n                                .map(m => <Select.Option key={m.id}>{m.name}</Select.Option>)}\r\n                        </Select>, i.type, \"Should not be blank\")\r\n                    );\r\n                }\r\n            },\r\n        ];\r\n        const data = this.state.ingredients.sort((a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1);\r\n        return this.state.ingredients.length > 0 && (\r\n            <Table columns={columns} dataSource={data} pagination={false} rowKey=\"id\" />\r\n        );\r\n    }\r\n\r\n    renderMultichooser() {\r\n        return (\r\n            <Select\r\n                className=\"multi-chooser\"\r\n                mode=\"multiple\"\r\n                placeholder={window.foodnet.ingredients.length === 0 ? \"Use the gear menu to create new ingredients\" : \"Please select\"}\r\n                value={this.state.ingredients.sort((a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1).map(it => ({ key: it.id }))}\r\n                disabled={window.foodnet.ingredients.length === 0}\r\n                onChange={(values) => {\r\n                    const ids = values.map(it => Number(it.key));\r\n                    const idsToKeep = this.state.ingredients.map(it => it.id).filter(it => ids.indexOf(it) !== -1);\r\n                    const idsToAdd = ids.filter(id => this.state.ingredients.map(it => it.id).indexOf(id) === -1);\r\n                    this.setState({\r\n                        ingredients: this.state.ingredients\r\n                            .filter(it => idsToKeep.indexOf(it.id) !== -1)\r\n                            .concat(\r\n                                idsToAdd.map(it2 => (\r\n                                    { ...window.foodnet.ingredients.find(it3 => it3.id === it2) }\r\n                                ))\r\n                            )\r\n                            .sort((a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1)\r\n                    })\r\n                }}\r\n                labelInValue={true}\r\n            >\r\n                {window.foodnet.ingredients.sort((a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1).map(it => (\r\n                    <Select.Option key={it.id} value={it.id}>{it.name}</Select.Option>\r\n                ))}\r\n            </Select>\r\n        );\r\n    }\r\n\r\n    renderIngAddButton() {\r\n        return (\r\n            <Button onClick={() => {\r\n                this.setState({ modal: 'add' })\r\n            }}>Create New Ingredient</Button>\r\n        );\r\n    }\r\n\r\n    renderIngEditButton() {\r\n        return (\r\n            <Button onClick={() => {\r\n                this.setState({ modal: 'edit' })\r\n            }}>Edit Existing Ingredients</Button>\r\n        );\r\n    }\r\n\r\n    renderTypeAddButton() {\r\n        return (\r\n            <Button onClick={() => {\r\n                this.setState({ tmodal: 'add' })\r\n            }}>Create New Measurement</Button>\r\n        );\r\n    }\r\n\r\n    renderTypeEditButton() {\r\n        return (\r\n            <Button onClick={() => {\r\n                this.setState({ tmodal: 'edit' })\r\n            }}>Edit Existing Measurements</Button>\r\n        );\r\n    }\r\n\r\n    validateForm() {\r\n        const isValid = this.state.name && this.state.name.trim().length > 0 && this.state.ingredients && this.state.ingredients.length > 0;\r\n        if (!isValid) return true;\r\n        for (var i in (this.state.ingredients || [])) {\r\n            const item = this.state.ingredients[i];\r\n            if (!item.type || !item.qty) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}","import React from 'react';\r\nimport RecipeList from './RecipeList'\r\nimport RecipeToolbar from './RecipeToolbar'\r\nimport { Modal, message } from 'antd'\r\nimport RecipeForm from './RecipeForm'\r\nimport './RecipeApp.css'\r\nimport { isRecipeUsed } from '../admin/EntityUsageChecker'\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        modal: false\r\n    }\r\n\r\n    render() {\r\n        //TODO: split add button, to: add custom recipe, add prepared food, add packaged food\r\n        //TODO: allow another recipe to be an ingredient?\r\n        //TODO: make list look better\r\n        return (\r\n            <>\r\n                {this.renderToolbar()}\r\n                {this.renderList()}\r\n                {this.renderModal()}\r\n            </>\r\n        );\r\n    }\r\n\r\n    renderList() {\r\n        return <RecipeList selected={window.foodnet.selected} select={(id) => this.forceUpdate()} />;\r\n    }\r\n\r\n    renderToolbar() {\r\n        return <RecipeToolbar selected={window.foodnet.selected} showModal={(a) => this.setState({ modal: a })} delete={() => this.handleDelete()} />\r\n    }\r\n\r\n    handleDelete() {\r\n        if (isRecipeUsed(window.foodnet.selected)) {\r\n            message.error(\"This recipe is still being used. Please remove or replace the recipe where it is being used before deleting.\")\r\n        }\r\n        else {\r\n            window.foodnet.recipes = window.foodnet.recipes.filter(r => r.id !== window.foodnet.selected);\r\n            window.foodnet.selected = undefined;\r\n            window.foodnet.sync();\r\n            this.forceUpdate();\r\n        }\r\n    }\r\n\r\n    renderModal() {\r\n        return this.state.modal && (\r\n            <Modal width=\"90%\" visible={true} footer={null} onCancel={() => this.setState({ modal: undefined })} maskClosable={false} keyboard={true}>\r\n                <RecipeForm edit={this.state.modal === 'edit' ? window.foodnet.selected : undefined} close={() => this.setState({ modal: undefined })} />\r\n            </Modal>\r\n        )\r\n    }\r\n}","import React from 'react';\r\nimport RecipeForm from '../recipe/RecipeForm'\r\n\r\nexport default class extends React.Component {\r\n    render() {\r\n        return (\r\n            <RecipeForm/>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport './AppHeader.css';\r\nimport { Menu, Icon } from 'antd';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nexport default withRouter(props => <AppHeader {...props} />);\r\n\r\nclass AppHeader extends React.Component {\r\n    componentDidMount() {\r\n        // console.log(this.props.location);\r\n    }\r\n    render() {\r\n        const handleClick = (key) => {\r\n            switch (key) {\r\n                case \"recipes\":\r\n                    this.props.history.push(\"\");\r\n                    break;\r\n                case \"planner\":\r\n                    this.props.history.push(\"Planner\");\r\n                    break;\r\n                    case \"shopper\":\r\n                    this.props.history.push(\"Shopper\");\r\n                    break;\r\n                case \"importexport\":\r\n                    this.props.history.push(\"ImportExport\");\r\n                    break;\r\n                case \"reports\":\r\n                    this.props.history.push(\"Reports\");\r\n                    break;\r\n                default:\r\n            }\r\n        }\r\n        const findSelectionFromRoute = () => {\r\n            const path = this.props.location.pathname.substring(1)\r\n            switch (path) {\r\n                case \"ImportExport\":\r\n                case 'Reports':\r\n                case 'Planner':\r\n                case 'Shopper':\r\n                    return path.toLowerCase()\r\n                default:\r\n                    return \"recipes\"\r\n            }\r\n        }\r\n        return (\r\n            <Menu onClick={(e) => handleClick(e.key)} selectedKeys={[findSelectionFromRoute()]} mode=\"horizontal\">\r\n                <Menu.Item key=\"recipes\">\r\n                    <Icon type=\"heart\" theme=\"twoTone\" twoToneColor=\"#eb2f96\" />\r\n                    Recipes\r\n                </Menu.Item>\r\n                <Menu.Item key=\"planner\">\r\n                    <Icon type=\"calendar\" theme=\"twoTone\" />\r\n                    Planner\r\n                </Menu.Item>\r\n                <Menu.Item key=\"shopper\">\r\n                    <Icon type=\"shopping\" theme=\"twoTone\" />\r\n                    Shopper\r\n                </Menu.Item>\r\n                <Menu.Item key=\"reports\">\r\n                    <Icon type=\"align-left\" />\r\n                    Reports\r\n                </Menu.Item>\r\n                <Menu.Item key=\"importexport\">\r\n                    <Icon type=\"setting\" />\r\n                    Import/Export\r\n                </Menu.Item>\r\n            </Menu>\r\n        )\r\n    }\r\n}","import XLSX from 'xlsx';\r\n\r\nexport const load = (input) => {\r\n    const wb = XLSX.read(input, { type: 'array' });\r\n    const r = XLSX.utils.sheet_to_json(wb.Sheets.Recipes);\r\n    window.foodnet.recipes = r.map(it => ({ ...it, ingredients: JSON.parse(it.ingredientsJson) }));\r\n    const i = XLSX.utils.sheet_to_json(wb.Sheets.Ingredients);\r\n    window.foodnet.ingredients = i.map(it => ({ ...it, tags: it.tagsJson ? JSON.parse(it.tagsJson) : [] }));\r\n    window.foodnet.measurements = XLSX.utils.sheet_to_json(wb.Sheets.Measurements);\r\n    window.foodnet.events = XLSX.utils.sheet_to_json(wb.Sheets.Events);\r\n    window.foodnet.sync();\r\n}\r\n\r\nexport const save = (filename) => {\r\n    const wb = XLSX.utils.book_new();\r\n    XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(window.foodnet.recipes.map(it => ({ ...it, ingredientsJson: JSON.stringify(it.ingredients) }))), \"Recipes\");\r\n    XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(window.foodnet.ingredients.map(it => ({ ...it, tagsJson: JSON.stringify(it.tags || []) }))), \"Ingredients\");\r\n    XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(window.foodnet.measurements), \"Measurements\");\r\n    XLSX.utils.book_append_sheet(wb, XLSX.utils.json_to_sheet(window.foodnet.events), \"Events\");\r\n    XLSX.writeFile(wb, filename || 'foodnet.xlsx');\r\n}","import React from 'react';\r\nimport { save, load } from '../loaders/ExcelLoader';\r\nimport { Modal, Button, Form, Input, AutoComplete } from 'antd';\r\nimport './ImportExport.css';\r\nimport axios from 'axios'\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        filename: 'backup.xlsx',\r\n        allowedFileExtensions: [\r\n            'xlsx', 'xlsm', 'xlsb', 'xml', 'xls', 'xlw', 'csv', 'txt', 'dif', 'sylk', 'slk', 'prn', 'ods', 'fods', 'dbf', 'eth'\r\n        ].map(it => '.' + it),\r\n    }\r\n    render() {\r\n        if (!window.File || !window.FileReader || !window.FileList || !window.Blob) {\r\n            return (\r\n                <div>\r\n                    Error: your browser does not support the File API specification. It is required for long term storage.\r\n                </div>\r\n            )\r\n        }\r\n        return (\r\n            <div className=\"import-export\">\r\n                <Button onClick={() => this.setState({ saveModal: true })}>\r\n                    Export To Excel\r\n                </Button>\r\n                <Button onClick={() => this.setState({ loadModal: true })}>\r\n                    Import From Excel\r\n                </Button>\r\n                <Button onClick={() => this.setState({ urlModal: true })}>\r\n                    Import From Url\r\n                </Button>\r\n                {this.state.saveModal && (\r\n                    <Modal className=\"save-modal\" visible={true} onCancel={() => this.setState({ saveModal: false })} onOk={() => { save(this.getFilename()); this.setState({ saveModal: false }) }}>\r\n                        <Form.Item label=\"File Name\">\r\n                            <Input value={this.state.filename} onChange={v => this.setState({ filename: v.target.value })} />\r\n                        </Form.Item>\r\n                    </Modal>\r\n                )}\r\n                {this.state.loadModal && (\r\n                    <Modal className=\"load-modal\" visible={true} onCancel={() => this.setState({ loadModal: false })} okButtonProps={{ disabled: !this.state.file }} onOk={() => {\r\n                        var fileReader = new FileReader();\r\n                        fileReader.onload = function (e) {\r\n                            load(e.target.result);\r\n                        };\r\n                        fileReader.readAsArrayBuffer(this.state.file);\r\n                        this.setState({ loadModal: false })\r\n                    }}>\r\n                        <Form.Item label=\"\">\r\n                            <Input type=\"file\" id=\"file\" name=\"file\" accept={this.state.allowedFileExtensions.join(',')} onChange={e => {\r\n                                this.setState({ file: e.target.files[0] })\r\n                            }} />\r\n                        </Form.Item>\r\n                    </Modal>\r\n                )}\r\n                {this.state.urlModal && this.urlModal()}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    urlModal() {\r\n        const dropboxHack = (url) => {\r\n            if (url && url.indexOf(\"www.dropbox.com\")) {\r\n                return url.replace(\"www.dropbox.com\", \"dl.dropboxusercontent.com\");\r\n            }\r\n        }\r\n        const validateUrl = () => {\r\n            if (!this.state.url || this.state.url.length === 0) {\r\n                return false;\r\n            }\r\n            if (this.state.urlError) {\r\n                return false;\r\n            }\r\n            if (!this.state.url.startsWith(\"http\")) {\r\n                return false;\r\n            }\r\n            if (this.state.url.indexOf(\"://\") === -1) {\r\n                return false;\r\n            }\r\n            return true;\r\n        }\r\n        const validateMsg = () => {\r\n            if (!this.state.url || this.state.url.length === 0) {\r\n                return \"Cannot be blank\";\r\n            }\r\n            if (this.state.urlError) {\r\n                return undefined;\r\n            }\r\n            if (!this.state.url.startsWith(\"http\")) {\r\n                return \"URL must begin with http or https\";\r\n            }\r\n            if (this.state.url.indexOf(\"://\") === -1) {\r\n                return \"URL is not in the correct format (i.e. http://example.com)\";\r\n            }\r\n        }\r\n        const submit = () => {\r\n            axios.get(dropboxHack(this.state.url), { responseType: 'arraybuffer' }).then((r) => {\r\n                if (r.status !== 200) {\r\n                    this.setState({ urlError: `${r.status ? r.response.status + \" - \" : \"\"}${r.statusText ? r.response.statusText + \": \" : \"\"}${r.data || \"\"}` })\r\n                }\r\n                else {\r\n                    try {\r\n                        load(r.data)\r\n                        if (window.foodnet.importUrls.indexOf(this.state.url) === -1) {\r\n                            window.foodnet.importUrls.push(this.state.url);\r\n                            window.foodnet.sync();\r\n                        }\r\n                        this.setState({ urlModal: undefined, url: undefined })\r\n                    }\r\n                    catch (error) {\r\n                        console.log(error);\r\n                        this.setState({ urlError: \"Could not parse file: \" + error })\r\n                    }\r\n                }\r\n            }).catch((e) => {\r\n                console.log(e)\r\n                if (!e.response) {\r\n                    e.response = {\r\n                        statusText: \"error: CORS blocking\"\r\n                    }\r\n                }\r\n                console.log(`${e.response.status ? e.response.status + \" - \" : \"\"}${e.response.statusText ? e.response.statusText + \": \" : \"\"}${e.response.data || \"\"}`)\r\n                this.setState({ urlError: `${e.response.status ? e.response.status + \" - \" : \"\"}${e.response.statusText ? e.response.statusText : \"\"}` })\r\n            })\r\n        }\r\n        return (\r\n            <Modal className=\"url-modal\" visible={true} onCancel={() => this.setState({ urlModal: false })} okButtonProps={{ disabled: !validateUrl() }} onOk={() => submit()}>\r\n                <Form.Item label=\"Remote URL\" validateStatus={validateUrl() ? 'success' : 'error'} help={this.state.urlError || validateMsg()}>\r\n                    <AutoComplete style={{ width: 200 }} value={this.state.url} onChange={e => {\r\n                        this.setState({ url: e, urlError: undefined })\r\n                    }} >\r\n                        {window.foodnet.importUrls.map(it => (\r\n                            <AutoComplete.Option key={it}>{it}</AutoComplete.Option>\r\n                        ))}\r\n                    </AutoComplete>\r\n                </Form.Item>\r\n            </Modal>\r\n        )\r\n    }\r\n\r\n    getFilename() {\r\n        const { filename } = this.state;\r\n        for (let e in this.state.allowedFileExtensions) {\r\n            if (filename.endsWith(this.state.allowedFileExtensions[e])) {\r\n                return filename;\r\n            }\r\n        }\r\n        return filename + \".xlsx\";\r\n    }\r\n}","import React from 'react';\r\nimport './Reports.css';\r\nimport { Menu, Icon, Layout, Tree, Button, Card } from 'antd';\r\nconst { Sider, Content } = Layout;\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        menu: 'r1'\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Layout className=\"reports-layout\">\r\n                <Sider collapsible={true}>\r\n                    {this.renderMenu()}\r\n                </Sider>\r\n                <Content>\r\n                    {this.renderSelectedMenuItem()}\r\n                </Content>\r\n            </Layout>\r\n        );\r\n    }\r\n\r\n    renderSelectedMenuItem() {\r\n        switch (this.state.menu) {\r\n            case \"r1\": return this.renderCookingReferenceReport()\r\n            case \"r1p2\": return this.renderCookingReferenceReportPage2()\r\n            case \"r2\": return this.renderTopFavoritesReport()\r\n            default: return undefined\r\n        }\r\n    }\r\n\r\n    renderMenu() {\r\n        return (\r\n            <Menu\r\n                onClick={(e) => this.setState({ menu: e.key })}\r\n                defaultSelectedKeys={['r1']}\r\n                defaultOpenKeys={['r']}\r\n                mode=\"inline\" style={{ height: '100%' }}\r\n            >\r\n                <Menu.SubMenu\r\n                    key=\"r\"\r\n                    title={\r\n                        <span>\r\n                            <Icon type=\"heart\" theme=\"twoTone\" twoToneColor=\"#eb2f96\" />\r\n                            <span>Recipe Reports</span>\r\n                        </span>\r\n                    }\r\n                >\r\n                    <Menu.Item key=\"r1\">Cooking Reference</Menu.Item>\r\n                    <Menu.Item key=\"r2\">Top Favorites</Menu.Item>\r\n                </Menu.SubMenu>\r\n            </Menu>\r\n        );\r\n    }\r\n\r\n    renderCookingReferenceReport() {\r\n        const check = (e) => {\r\n            if (e && e.length === 1 && e[0] === '0-0') {\r\n                this.setState({ r1checkedKeys: window.foodnet.recipes.map(it => it.id.toString()) });\r\n            }\r\n            else {\r\n                this.setState({ r1checkedKeys: e })\r\n            }\r\n        };\r\n        return (\r\n            <div className=\"recipe-select\">\r\n                <Tree\r\n                    checkable\r\n                    onSelect={(e) => check(e)}\r\n                    onCheck={(e) => check(e)}\r\n                    expandedKeys={['0-0']}\r\n                    checkedKeys={this.state.r1checkedKeys}\r\n                >\r\n                    <Tree.TreeNode title=\"All Recipes\" key=\"0-0\">\r\n                        {window.foodnet.recipes.map(r => (\r\n                            <Tree.TreeNode title={r.name} key={r.id} />\r\n                        ))}\r\n                    </Tree.TreeNode>\r\n                </Tree>\r\n                <Button disabled={!this.state.r1checkedKeys || this.state.r1checkedKeys.length < 1} onClick={() => { this.setState({ menu: 'r1p2' }) }}>Generate Report</Button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderCookingReferenceReportPage2() {\r\n        return (\r\n            <div className=\"recipe-report\">\r\n                {window.foodnet.recipes.filter(it => this.state.r1checkedKeys.indexOf(it.id.toString()) !== -1).map(r => (\r\n                    <Card key={r.id} size=\"small\" >\r\n                        <div className=\"recipe\" key={r.id}>\r\n                            <div className=\"recipe-name\">Recipe Name:</div>\r\n                            <div>{r.name}</div>\r\n                            <div className=\"desc-header\">Instructions:</div>\r\n                            <div className=\"desc-body\">{r.desc || \"None\"}</div>\r\n                            <div className=\"ing\">Ingredients:</div>\r\n                            <div className=\"ingredient-list\">\r\n                                {r.ingredients.map(i => (\r\n                                    <div key={i.id}>\r\n                                        <div>\r\n                                            {window.foodnet.ingredients.find(it => it.id === i.id).name}, {i.qty} {window.foodnet.measurements.find(it => it.id === i.type).name}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    </Card>\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderTopFavoritesReport() {\r\n        return <div>Coming Soon</div>\r\n    }\r\n}","import React from 'react';\r\nimport './Planner.css';\r\nimport { Tooltip, Calendar, Badge, Radio, Timeline, Form, Button, Input, Select, Modal, Icon, } from 'antd';\r\nimport moment from 'moment';\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        mode: \"list\",\r\n        listDays: Number.isInteger(window.foodnet.listDays) ? window.foodnet.listDays : 7,\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n                <div className=\"planner\">\r\n                    {this.renderToolbar()}\r\n                    {this.state.mode === \"calendar\" && this.renderCalendar()}\r\n                    {this.state.mode === \"list\" && this.renderList()}\r\n                </div>\r\n                {this.renderAddListItemModal()}\r\n            </>\r\n        );\r\n    }\r\n\r\n    renderToolbar() {\r\n        return (\r\n            <div className=\"planner-toolbar\">\r\n                <Radio.Group onChange={(e) => this.setState({ mode: e.target.value })} value={this.state.mode}>\r\n                    <Radio value={\"list\"}>List View</Radio>\r\n                    <Radio value={\"calendar\"}>Calendar View</Radio>\r\n                </Radio.Group>\r\n                {this.state.mode === \"list\" && (\r\n                    <Input type=\"number\" value={this.state.listDays} onChange={e => {\r\n                        if (e.target.value.length === 0) {\r\n                            this.setState({ listDays: undefined })\r\n                        }\r\n                        else {\r\n                            let v = Number(e.target.value)\r\n                            if (v < 0) v = 0;\r\n                            this.setState({ listDays: v })\r\n                            window.foodnet.listDays = v\r\n                            window.foodnet.sync()\r\n                        }\r\n                    }} />\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderAddListItemModal() {\r\n        const valid = () => {\r\n            return this.state.recipe;\r\n        }\r\n        const submit = () => {\r\n            if (this.state.eventid) {\r\n                window.foodnet.events = window.foodnet.events.filter(e => e.id !== this.state.eventid).concat({\r\n                    id: this.state.eventid,\r\n                    date: moment().add(this.state.dayOffset, \"days\").format(),\r\n                    qty: Number(this.state.qty || 1),\r\n                    recipe: this.state.recipe,\r\n                })\r\n            }\r\n            else {\r\n                window.foodnet.events.push({\r\n                    id: window.foodnet.events.length === 0 ? 1 : Math.max(...window.foodnet.events.map(e => e.id)) + 1,\r\n                    date: moment().add(this.state.dayOffset, \"days\").format(),\r\n                    qty: Number(this.state.qty || 1),\r\n                    recipe: this.state.recipe,\r\n                })\r\n            }\r\n            window.foodnet.sync();\r\n            this.setState({\r\n                eventid: undefined,\r\n                recipe: undefined,\r\n                qty: undefined,\r\n                dayOffset: undefined,\r\n                modal: undefined,\r\n            })\r\n        }\r\n        const formItemLayout = {\r\n            labelCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 6 },\r\n            },\r\n            wrapperCol: {\r\n                xs: { span: 24 },\r\n                sm: { span: 12 },\r\n            },\r\n        };\r\n        return (this.state.modal === \"add-list-item\" || this.state.modal === \"edit-list-item\") && (\r\n            <Modal\r\n                className=\"list-item-modal\"\r\n                visible={true}\r\n                onCancel={() => this.setState({ modal: undefined })}\r\n                footer={[\r\n                    this.state.modal === \"edit-list-item\" && (\r\n                        <Button key=\"delete\" type=\"danger\" onClick={() => {\r\n                            window.foodnet.events = window.foodnet.events.filter(e => e.id !== this.state.eventid);\r\n                            window.foodnet.sync();\r\n                            this.setState({\r\n                                eventid: undefined,\r\n                                recipe: undefined,\r\n                                qty: undefined,\r\n                                dayOffset: undefined,\r\n                                modal: undefined,\r\n                            })\r\n                        }}>Delete Event</Button>\r\n                    ),\r\n                    <Button key=\"back\" onClick={() => this.setState({ modal: undefined })}>Cancel</Button>,\r\n                    <Button key=\"submit\" type=\"primary\" disabled={!valid()} onClick={() => submit()}>OK</Button>,\r\n                ]}\r\n            >\r\n                <Form {...formItemLayout}>\r\n                    <Form.Item validateStatus={valid() ? \"success\" : \"error\"} hasFeedback={true} label=\"Recipe\">\r\n                        <Select value={this.state.recipe} onChange={v => this.setState({ recipe: Number(v) })}>\r\n                            {window.foodnet.recipes.map(r => (\r\n                                <Select.Option key={r.id} value={r.id}>{r.name}</Select.Option>\r\n                            ))}\r\n                        </Select>\r\n                    </Form.Item>\r\n                    <Form.Item label=\"Quantity\">\r\n                        <Input\r\n                            autoFocus\r\n                            type=\"number\"\r\n                            defaultValue={1}\r\n                            value={this.state.qty}\r\n                            onChange={e => this.setState({ qty: e.target.value })}\r\n                            onPressEnter={() => {\r\n                                if (valid()) {\r\n                                    submit();\r\n                                }\r\n                            }}\r\n                        />\r\n                    </Form.Item>\r\n                </Form>\r\n            </Modal>\r\n        )\r\n    }\r\n\r\n    renderList() {\r\n        const now_s_format = \"Y-M-D\";\r\n        const createItemsForDay = (dayOffset) => {\r\n            return window.foodnet.events\r\n                .filter(e => {\r\n                    return moment().add(dayOffset, \"days\").format(now_s_format) === moment(e.date).format(now_s_format)\r\n                })\r\n                .sort((a, b) => a.id < b.id ? -1 : 1)\r\n                .map(e => (\r\n                    <Timeline.Item key={e.id} color=\"green\" onClick={() => {\r\n                        this.setState({\r\n                            eventid: e.id,\r\n                            modal: \"edit-list-item\",\r\n                            dayOffset: dayOffset,\r\n                            recipe: e.recipe,\r\n                            qty: e.qty,\r\n                        })\r\n                    }} >{e.qty} x {window.foodnet.recipes.find(r => r.id === e.recipe).name}</Timeline.Item>\r\n                ))\r\n        }\r\n        const addForDay = (dayOffset) => {\r\n            return <Timeline.Item key=\"add\" onClick={() => {\r\n                this.setState({\r\n                    eventid: undefined,\r\n                    modal: \"add-list-item\",\r\n                    dayOffset: dayOffset,\r\n                    recipe: undefined,\r\n                    qty: undefined,\r\n                })\r\n            }} dot={<Icon type=\"plus-circle\" theme=\"twoTone\" twoToneColor=\"red\" />}>Add</Timeline.Item>;\r\n        }\r\n        const createList = (dayOffset) => {\r\n            return (\r\n                <Timeline key={dayOffset}>\r\n                    <Timeline.Item key=\"top\" color=\"blue\"><b><u>{moment().add(dayOffset, 'days').format(\"dddd (MMM D)\")}</u></b></Timeline.Item>\r\n                    {createItemsForDay(dayOffset)}\r\n                    {addForDay(dayOffset)}\r\n                </Timeline>\r\n            )\r\n        }\r\n        return (\r\n            <div className=\"planner-list\">\r\n                {Array.from(Array(this.state.listDays)).map((z, day) => createList(day))}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderCalendar() {\r\n        const now_s_format = \"Y-M-D\";\r\n        const dateCellRender = (m) => {\r\n            const listData = window.foodnet.events.filter(e => {\r\n                return moment(e.date).format(now_s_format) === m.format(now_s_format)\r\n            }).map(e => {\r\n                const text = `${e.qty} x ${window.foodnet.recipes.find(r => r.id === e.recipe).name}`;\r\n                const dayOffset = moment(e.date).startOf('day').diff(moment().startOf('day'), 'days')\r\n                return { \r\n                    eid: e.id, \r\n                    dayOffset: dayOffset, \r\n                    type: dayOffset < 0 ? 'error' : dayOffset === 0 ? 'success' : 'warning', \r\n                    content: <Tooltip placement=\"top\" title={text}>{text}</Tooltip> \r\n                };\r\n            });\r\n            return (\r\n                <ul className=\"events\">\r\n                    {listData.map(item => (\r\n                        <li key={item.eid}>\r\n                            <Badge onClick={(event) => {\r\n                                const e = window.foodnet.events.find(it => it.id === item.eid);\r\n                                const dayOffset = item.dayOffset\r\n                                this.setState({\r\n                                    eventid: e.id,\r\n                                    modal: \"edit-list-item\",\r\n                                    dayOffset: dayOffset,\r\n                                    recipe: e.recipe,\r\n                                    qty: e.qty,\r\n                                })\r\n                                event.stopPropagation();\r\n                            }} status={item.type} text={item.content} />\r\n                        </li>\r\n                    ))}\r\n                </ul>\r\n            );\r\n        }\r\n\r\n        const monthCellRender = (m) => {\r\n            const listData = window.foodnet.events.filter(e => {\r\n                return moment(e.date).month() === m.month() && moment(e.date).year() === m.year()\r\n            })\r\n            return (\r\n                listData.length + \" recipes\"\r\n            );\r\n          }\r\n\r\n        return (\r\n            <Calendar mode={this.state.calMode || \"month\"} onPanelChange={(value, mode) => this.setState({calMode: mode})} dateCellRender={dateCellRender} monthCellRender={monthCellRender} onSelect={(m) => {\r\n                if(this.state.calMode === 'year') {\r\n                    this.setState({calMode: 'month'})\r\n                    return;\r\n                };\r\n                const dayOffset = m.startOf('day').diff(moment().startOf('day'), 'days')\r\n                this.setState({\r\n                    eventid: undefined,\r\n                    modal: \"add-list-item\",\r\n                    dayOffset: dayOffset,\r\n                    recipe: undefined,\r\n                    qty: undefined,\r\n                })\r\n            }}/>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport { Tag, Input, Tooltip, Icon } from 'antd';\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        tagColors: [\"blue\", \"green\", \"red\", \"orange\", \"cyan\", \"purple\"],\r\n    }\r\n\r\n    render() {\r\n        const handleInputConfirm = () => {\r\n            const { inputValue } = this.state;\r\n            this.setState({\r\n                inputVisible: false,\r\n                inputValue: '',\r\n            });\r\n            if (inputValue && inputValue.trim().length > 0)\r\n                this.props.add(inputValue.trim());\r\n        }\r\n        return (\r\n            <div className={this.props.className || \"\"}>\r\n                {this.props.tags.map((tag, index) => {\r\n                    const isLongTag = tag.length > 20;\r\n                    const tagElem = (\r\n                        <Tag key={tag} color={this.state.tagColors[index % this.state.tagColors.length]} closable={true} onClose={() => this.props.remove(tag)}>\r\n                            {isLongTag ? `${tag.slice(0, 20)}...` : tag}\r\n                        </Tag>\r\n                    );\r\n                    return isLongTag ? (\r\n                        <Tooltip title={tag} key={tag}>\r\n                            {tagElem}\r\n                        </Tooltip>\r\n                    ) : (tagElem);\r\n                })}\r\n                {this.state.inputVisible && (\r\n                    <Input\r\n                        ref={input => (this.input = input)}\r\n                        type=\"text\"\r\n                        size=\"small\"\r\n                        style={{ width: 78 }}\r\n                        value={this.state.inputValue}\r\n                        onChange={(e) => this.setState({ inputValue: e.target.value })}\r\n                        onBlur={handleInputConfirm}\r\n                        onPressEnter={handleInputConfirm}\r\n                    />\r\n                )}\r\n                {!this.state.inputVisible && (\r\n                    <Tag onClick={() => this.setState({ inputVisible: true }, () => this.input.focus())} style={{ background: '#fff', borderStyle: 'dashed' }}>\r\n                        <Icon type=\"plus\" /> New Tag\r\n                    </Tag>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport './Shopper.css'\r\nimport { DatePicker, Checkbox, Dropdown, Modal, Button, Menu, Tag, Switch, Icon } from 'antd'\r\nimport moment from 'moment'\r\nimport Tags from './Tags'\r\nimport ReactDragListView from 'react-drag-listview'\r\n\r\nconst { RangePicker } = DatePicker\r\n\r\nexport default class extends React.Component {\r\n    state = {\r\n        checkedItems: [],\r\n        filteredTags: [],\r\n    }\r\n    componentDidMount() {\r\n        this.setState({\r\n            dates: window.foodnet.plannerDates && window.foodnet.plannerDates.length === 2 ? window.foodnet.plannerDates.map(it => moment(it)) : undefined,\r\n            checkedItems: window.foodnet.plannerCheckedItems || [],\r\n            customSort: window.foodnet.customSort,\r\n            customSortOrder: window.foodnet.customSortOrder,\r\n        })\r\n    }\r\n    render() {\r\n        const updateTags = (tag, checked) => {\r\n            let tags = this.state.filteredTags;\r\n            if (checked) {\r\n                tags = tags.concat(tag)\r\n            }\r\n            else {\r\n                tags = tags.filter(t => t !== tag)\r\n            }\r\n            this.setState({ filteredTags: tags })\r\n        }\r\n\r\n        const tags = this.getTags()\r\n\r\n        const createMenu = () => {\r\n            return [(\r\n                <Menu.Item key={\"_NO_TAG\"}><Checkbox onChange={e => updateTags(\"_NO_TAG\", e.target.checked)}>Untagged</Checkbox></Menu.Item>\r\n            )].concat(tags.map(tag => (\r\n                <Menu.Item key={tag}><Checkbox onChange={e => updateTags(tag, e.target.checked)}>{tag}</Checkbox></Menu.Item>\r\n            )))\r\n        }\r\n\r\n        const onDragEnd = (fromIndex, toIndex) => {\r\n            const newTags = [...tags]\r\n            const item = newTags.splice(fromIndex, 1)[0];\r\n            newTags.splice(toIndex, 0, item);\r\n            this.setState({ customSortOrder: newTags });\r\n        }\r\n\r\n        return (\r\n            <div className=\"shopper\">\r\n                <div className=\"buttons\">\r\n                    <Button disabled={!tags || tags.length === 0} onClick={() => this.setState({ modal: 'sort' })}>Sort by Tags</Button>\r\n                    <Dropdown\r\n                        disabled={createMenu().length === 1}\r\n                        onVisibleChange={(v) => this.setState({ dropdownvisible: v })}\r\n                        visible={this.state.dropdownvisible}\r\n                        trigger={['click']}\r\n                        overlay={(\r\n                            <Menu>\r\n                                {createMenu()}\r\n                            </Menu>\r\n                        )}>\r\n                        <Button>Filter by Tags</Button>\r\n                    </Dropdown>\r\n                    <Button onClick={() => this.setState({ hideTags: !this.state.hideTags })}>{this.state.hideTags ? 'Show Tags' : 'Hide Tags'}</Button>\r\n                </div>\r\n                <RangePicker value={this.state.dates} onChange={(m) => {\r\n                    this.setState({ dates: m, checkedItems: [] })\r\n                    window.foodnet.plannerDates = m.map(it => it.format());\r\n                    window.foodnet.plannerCheckedItems = [];\r\n                    window.foodnet.sync();\r\n                }} />\r\n                {this.state.dates && (\r\n                    this.createIngredientList()\r\n                )}\r\n\r\n                {this.state.modal === 'sort' && (\r\n                    <Modal className=\"sort-popup\" visible={true} onCancel={() => {\r\n                        this.setState({ modal: undefined, customSort: window.foodnet.customSort, customSortOrder: window.foodnet.customSortOrder })\r\n                    }} onOk={() => {\r\n                        window.foodnet.customSort = this.state.customSort\r\n                        window.foodnet.customSortOrder = this.state.customSortOrder\r\n                        window.foodnet.sync()\r\n                        this.setState({ modal: undefined })\r\n                    }}>\r\n                        <div><Switch checked={this.state.customSort} onChange={(checked) => {\r\n                            this.setState({ customSort: checked, customSortOrder: tags })\r\n                        }} /> Enable Tag Sorting</div>\r\n                        <ReactDragListView\r\n                            onDragEnd={onDragEnd}\r\n                            nodeSelector=\"li\"\r\n                            handleSelector=\"li\"\r\n                        >\r\n                            <div className=\"drag-list\">\r\n                                {tags.map((item, index) => (\r\n                                    <>\r\n                                        <Tag>{item}</Tag> \r\n                                        <Icon className=\"up\" type=\"up\" onClick={() => onDragEnd(index, index-1)}/> \r\n                                        <Icon className=\"down\" type=\"down\" onClick={() => onDragEnd(index, index+1)}/>\r\n                                    </>\r\n                                ))}\r\n                            </div>\r\n                        </ReactDragListView>\r\n                    </Modal>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    getTags() {\r\n        let tags = []\r\n        window.foodnet.ingredients.forEach(ing => {\r\n            (ing.tags || []).forEach(tag => {\r\n                if (tags.indexOf(tag) === -1) tags = tags.concat(tag);;\r\n            })\r\n        });\r\n        (this.state.filteredTags || []).forEach(t => {\r\n            if (tags.indexOf(t) === -1) tags = tags.concat(t);;\r\n        });\r\n        tags = tags.sort((a, b) => a.localeCompare(b))\r\n        if (this.state.customSort && this.state.customSortOrder && this.state.customSortOrder.length > 0) {\r\n            const { customSortOrder } = this.state;\r\n            tags = tags.sort((a, b) => {\r\n                const ai = customSortOrder.indexOf(a)\r\n                const bi = customSortOrder.indexOf(b)\r\n                if (ai !== -1 || bi !== -1) {\r\n                    if (ai !== -1 && bi !== -1) {\r\n                        return ai < bi ? -1 : 1;\r\n                    }\r\n                    return ai === -1 ? -1 : 1;\r\n                }\r\n                return 0;\r\n            })\r\n        }\r\n        return tags;\r\n    }\r\n\r\n    createIngredientList() {\r\n        const { foodnet } = window;\r\n        let list = [];\r\n        foodnet.events.forEach(event => {\r\n            if (moment(event.date).isBetween(...this.state.dates, 'days', '[]')) {\r\n                const multiplier = Number(event.qty) || 0;\r\n                const recipe = foodnet.recipes.find(r => r.id === event.recipe);\r\n                recipe.ingredients.forEach(ing => {\r\n                    list.push({ id: ing.id, type: ing.type, qty: Number(ing.qty) * multiplier });\r\n                })\r\n            }\r\n        })\r\n\r\n        const mergeDuplicates = (item, index, l) => {\r\n            if (index > 0 && l[index - 1].id === item.id && l[index - 1].type === item.type) {\r\n                let newIndex = index - 1;\r\n                while (l[newIndex].deleted) newIndex--;\r\n                l[newIndex].qty += item.qty;\r\n                item.deleted = true;\r\n            }\r\n            return item;\r\n        };\r\n        list = list.sort((a, b) => {\r\n            if (a.id !== b.id) {\r\n                return a.id < b.id ? -1 : 1;\r\n            }\r\n            if (a.type !== b.type) {\r\n                return a.type < b.type ? -1 : 1;\r\n            }\r\n            return 0;\r\n        }).map(mergeDuplicates).filter(item => !item.deleted);\r\n\r\n        const sortedTags = this.getTags()\r\n\r\n        return (\r\n            <ul className=\"ingredient-list\">\r\n                {list\r\n                    .map(item => ({\r\n                        ...item,\r\n                        name: foodnet.ingredients.find(i => i.id === item.id).name,\r\n                        typename: foodnet.measurements.find(m => m.id === item.type).name,\r\n                        checked: this.state.checkedItems.indexOf(item.id) !== -1,\r\n                        tags: foodnet.ingredients.find(i => i.id === item.id).tags || []\r\n                    }))\r\n                    .sort((a, b) => a.name.localeCompare(b.name) || a.typename.localeCompare(b.typename))\r\n                    .filter(item => {\r\n                        if (this.state.filteredTags.length === 0) return true;\r\n                        let tags = item.tags\r\n                        if (tags.length === 0) tags = ['_NO_TAG']\r\n                        let found = false;\r\n                        tags.forEach(t => {\r\n                            this.state.filteredTags.forEach(t2 => {\r\n                                if (t === t2) found = true;\r\n                            })\r\n                        })\r\n                        return found;\r\n                    })\r\n                    .sort((a, b) => {\r\n                        if (!this.state.customSort) {\r\n                            return 0;\r\n                        }\r\n                        if (!a.tags || !b.tags || a.tags.length === 0 || b.tags.length === 0) {\r\n                            if ((!a.tags || a.tags.length === 0) && (!b.tags || b.tags.length === 0)) {\r\n                                return 0;\r\n                            }\r\n                            return !a.tags || a.tags.length === 0 ? 1 : -1;\r\n                        }\r\n                        const findHighestTag = (tags) => tags.reduce((tag, highestTag) => {\r\n                            if (!highestTag) return tag;\r\n                            const ti = sortedTags.indexOf(tag)\r\n                            const hi = sortedTags.indexOf(highestTag)\r\n                            if (ti === -1 || hi === -1) {\r\n                                if (ti === -1 && hi === -1) return highestTag;\r\n                                return ti === -1 ? highestTag : tag;\r\n                            }\r\n                            return ti < hi ? tag : highestTag;\r\n                        })\r\n                        const aTag = findHighestTag(a.tags)\r\n                        const bTag = findHighestTag(b.tags)\r\n                        const ai = sortedTags.indexOf(aTag)\r\n                        const bi = sortedTags.indexOf(bTag)\r\n                        if (ai !== -1 || bi !== -1) {\r\n                            if (ai !== -1 && bi !== -1) {\r\n                                return ai < bi ? -1 : 1;\r\n                            }\r\n                            return ai === -1 ? -1 : 1;\r\n                        }\r\n                        return 0;\r\n                    })\r\n                    .map((item, index) => (\r\n                        <li key={index} className=\"shopper-list-items\">\r\n                            <Checkbox className=\"shopper-list-item\" key={index} checked={item.checked} onChange={e => {\r\n                                foodnet.plannerCheckedItems = foodnet.plannerCheckedItems.filter(it => it !== item.id)\r\n                                if (e.target.checked) {\r\n                                    foodnet.plannerCheckedItems = foodnet.plannerCheckedItems.concat(item.id);\r\n                                }\r\n                                this.setState({ checkedItems: foodnet.plannerCheckedItems });\r\n                                foodnet.sync();\r\n                            }}>\r\n                                {`${item.name}: ${item.qty} ${item.typename}`}\r\n                            </Checkbox>\r\n                            {!this.state.hideTags && <Tags className=\"shopper-tags\" tags={item.tags} add={(tag) => {\r\n                                const ing = foodnet.ingredients.find(i => i.id === item.id)\r\n                                foodnet.ingredients = foodnet.ingredients.filter(it => it.id !== item.id).concat({ ...ing, tags: [...item.tags].concat(tag) })\r\n                                foodnet.sync()\r\n                                this.forceUpdate()\r\n                            }} remove={(tag) => {\r\n                                const ing = foodnet.ingredients.find(i => i.id === item.id)\r\n                                foodnet.ingredients = foodnet.ingredients.filter(it => it.id !== item.id).concat({ ...ing, tags: [...item.tags].filter(it => it !== tag) })\r\n                                foodnet.sync()\r\n                                this.forceUpdate()\r\n                            }} />}\r\n                        </li>\r\n                    ))}\r\n            </ul>\r\n        );\r\n    }\r\n}","export default function() {\r\n    const names = [\"ingredients\", \"measurements\", \"recipes\", \"listDays\", \"events\", \"importUrls\", \"plannerDates\", \"plannerCheckedItems\", \"customSort\", \"customSortOrder\"];\r\n    window.foodnet = {\r\n        sync: () => {\r\n            names.forEach(it => localStorage.setItem(it, JSON.stringify(window.foodnet[it])));\r\n        }\r\n    };\r\n    names.forEach(it => window.foodnet[it] = JSON.parse(localStorage.getItem(it)));\r\n    names.forEach(it => {\r\n        if (window.foodnet[it] === undefined || window.foodnet[it] === null) {\r\n            window.foodnet[it] = [];\r\n        }\r\n    })\r\n}","import React from 'react';\nimport { HashRouter, Route } from 'react-router-dom'\nimport RecipeApp from './recipe/RecipeApp'\nimport TestRecipeForm from './manual-test/TestRecipeForm'\nimport loader from './loaders/LocalStorageLoader'\nimport AppHeader from './AppHeader'\nimport './App.css';\nimport ImportExport from './admin/ImportExport'\nimport Reports from './reports/Reports';\nimport Planner from './planner/Planner'\nimport Shopper from './shopper/Shopper'\n\nloader();\n\nexport default function () {\n  return (\n    <HashRouter hashType=\"noslash\">\n      <AppHeader />\n      <Route exact path=\"/ImportExport\" component={ImportExport} />\n      <Route exact path=\"/TestRecipeForm\" component={TestRecipeForm} />\n      <Route exact path=\"/Reports\" component={Reports} />\n      <Route exact path=\"/Planner\" component={Planner} />\n      <Route exact path=\"/Shopper\" component={Shopper} />\n      <Route exact path=\"/\" component={RecipeApp} />\n    </HashRouter>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport 'antd/dist/antd.css';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}